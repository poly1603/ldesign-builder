{"version":3,"file":"Modal.vue2.js","sources":["../../src/modal/Modal.vue"],"sourcesContent":["<template>\n  <Teleport to=\"body\">\n    <Transition name=\"l-modal\" appear>\n      <div v-if=\"visible\" :class=\"modalClasses\" @click=\"handleMaskClick\">\n        <div :class=\"dialogClasses\" @click.stop>\n          <div v-if=\"$slots.header || title || closable\" class=\"l-modal__header\">\n            <slot name=\"header\">\n              <div class=\"l-modal__title\">{{ title }}</div>\n            </slot>\n            <button\n              v-if=\"closable\"\n              class=\"l-modal__close\"\n              @click=\"handleClose\"\n            >\n              ✕\n            </button>\n          </div>\n          \n          <div :class=\"bodyClasses\">\n            <slot></slot>\n          </div>\n          \n          <div v-if=\"$slots.footer\" class=\"l-modal__footer\">\n            <slot name=\"footer\"></slot>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\n/**\n * Modal 模态框组件 - Vue3 版本\n * \n * 使用 Composition API 和 <script setup> 语法\n * 提供模态框功能，支持标题、内容、底部操作区域\n * 使用 Teleport 将模态框渲染到 body 下\n */\nimport { computed, watch, nextTick } from 'vue'\n\n// 定义组件名称\ndefineOptions({\n  name: 'LModal'\n})\n\n// 定义 Props 类型\nexport interface ModalProps {\n  /** 是否显示模态框 */\n  visible?: boolean\n  /** 模态框标题 */\n  title?: string\n  /** 模态框宽度 */\n  width?: string | number\n  /** 模态框尺寸 */\n  size?: 'small' | 'medium' | 'large'\n  /** 是否显示关闭按钮 */\n  closable?: boolean\n  /** 是否点击遮罩层关闭 */\n  maskClosable?: boolean\n  /** 是否居中显示 */\n  centered?: boolean\n  /** 是否全屏显示 */\n  fullscreen?: boolean\n  /** 内容区域是否有内边距 */\n  bodyPadding?: boolean\n  /** 层级 */\n  zIndex?: number\n}\n\n// 定义 Props 默认值\nconst props = withDefaults(defineProps<ModalProps>(), {\n  visible: false,\n  title: '',\n  width: '520px',\n  size: 'medium',\n  closable: true,\n  maskClosable: true,\n  centered: false,\n  fullscreen: false,\n  bodyPadding: true,\n  zIndex: 1000\n})\n\n// 定义 Emits\nexport interface ModalEmits {\n  /** 更新显示状态 */\n  'update:visible': [visible: boolean]\n  /** 关闭事件 */\n  close: []\n  /** 打开事件 */\n  open: []\n  /** 打开后事件 */\n  opened: []\n  /** 关闭后事件 */\n  closed: []\n}\n\nconst emit = defineEmits<ModalEmits>()\n\n// 计算属性\nconst modalClasses = computed(() => [\n  'l-modal',\n  {\n    'l-modal--centered': props.centered,\n    'l-modal--fullscreen': props.fullscreen\n  }\n])\n\nconst dialogClasses = computed(() => [\n  'l-modal__dialog',\n  `l-modal__dialog--${props.size}`,\n  {\n    'l-modal__dialog--fullscreen': props.fullscreen\n  }\n])\n\nconst bodyClasses = computed(() => [\n  'l-modal__body',\n  {\n    'l-modal__body--no-padding': !props.bodyPadding\n  }\n])\n\nconst dialogStyle = computed(() => {\n  const style: Record<string, any> = {\n    zIndex: props.zIndex\n  }\n  \n  if (!props.fullscreen && props.width) {\n    style.width = typeof props.width === 'number' ? `${props.width}px` : props.width\n  }\n  \n  return style\n})\n\n// 事件处理函数\nconst handleClose = () => {\n  emit('update:visible', false)\n  emit('close')\n}\n\nconst handleMaskClick = () => {\n  if (props.maskClosable) {\n    handleClose()\n  }\n}\n\n// 监听显示状态变化\nwatch(() => props.visible, (newVisible, oldVisible) => {\n  if (newVisible && !oldVisible) {\n    emit('open')\n    nextTick(() => {\n      emit('opened')\n    })\n  } else if (!newVisible && oldVisible) {\n    nextTick(() => {\n      emit('closed')\n    })\n  }\n})\n\n// 键盘事件处理\nconst handleKeydown = (event: KeyboardEvent) => {\n  if (event.key === 'Escape' && props.closable) {\n    handleClose()\n  }\n}\n\n// 监听键盘事件\nwatch(() => props.visible, (visible) => {\n  if (visible) {\n    document.addEventListener('keydown', handleKeydown)\n    // 禁止页面滚动\n    document.body.style.overflow = 'hidden'\n  } else {\n    document.removeEventListener('keydown', handleKeydown)\n    // 恢复页面滚动\n    document.body.style.overflow = ''\n  }\n})\n</script>\n\n<style lang=\"less\">\n@import '../styles/variables.less';\n\n.l-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  padding: var(--ls-padding-lg);\n  overflow-y: auto;\n  z-index: 1000;\n  \n  &--centered {\n    align-items: center;\n  }\n  \n  &--fullscreen {\n    padding: 0;\n  }\n  \n  // 对话框\n  &__dialog {\n    position: relative;\n    background-color: var(--ldesign-bg-color-container);\n    border-radius: var(--ls-border-radius-lg);\n    box-shadow: var(--ldesign-shadow-3);\n    max-width: 100%;\n    max-height: 100%;\n    display: flex;\n    flex-direction: column;\n    margin: auto 0;\n    \n    // 尺寸\n    &--small {\n      width: 400px;\n    }\n    \n    &--medium {\n      width: 520px;\n    }\n    \n    &--large {\n      width: 720px;\n    }\n    \n    &--fullscreen {\n      width: 100vw;\n      height: 100vh;\n      max-width: none;\n      max-height: none;\n      border-radius: 0;\n      margin: 0;\n    }\n  }\n  \n  // 头部\n  &__header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: var(--ls-padding-base) var(--ls-padding-base) 0;\n    border-bottom: 1px solid var(--ldesign-border-level-1-color);\n    margin-bottom: var(--ls-margin-base);\n  }\n  \n  &__title {\n    font-size: var(--ls-font-size-lg);\n    font-weight: 600;\n    color: var(--ldesign-text-color-primary);\n    margin: 0;\n    line-height: 1.4;\n  }\n  \n  &__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    border: none;\n    background: transparent;\n    border-radius: var(--ls-border-radius-base);\n    color: var(--ldesign-text-color-secondary);\n    font-size: 18px;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    \n    &:hover {\n      background-color: var(--ldesign-bg-color-component-hover);\n      color: var(--ldesign-text-color-primary);\n    }\n    \n    &:active {\n      background-color: var(--ldesign-bg-color-component-active);\n    }\n  }\n  \n  // 内容\n  &__body {\n    flex: 1;\n    padding: 0 var(--ls-padding-base);\n    color: var(--ldesign-text-color-primary);\n    line-height: 1.6;\n    overflow-y: auto;\n    \n    &--no-padding {\n      padding: 0;\n    }\n  }\n  \n  // 底部\n  &__footer {\n    padding: var(--ls-padding-base);\n    border-top: 1px solid var(--ldesign-border-level-1-color);\n    margin-top: var(--ls-margin-base);\n    display: flex;\n    justify-content: flex-end;\n    gap: var(--ls-spacing-sm);\n  }\n}\n\n// 动画\n.l-modal-enter-active,\n.l-modal-leave-active {\n  transition: opacity 0.3s ease-in-out;\n  \n  .l-modal__dialog {\n    transition: transform 0.3s ease-in-out;\n  }\n}\n\n.l-modal-enter-from,\n.l-modal-leave-to {\n  opacity: 0;\n  \n  .l-modal__dialog {\n    transform: scale(0.9) translateY(-20px);\n  }\n}\n\n.l-modal-enter-to,\n.l-modal-leave-from {\n  opacity: 1;\n  \n  .l-modal__dialog {\n    transform: scale(1) translateY(0);\n  }\n}\n</style>\n"],"names":["props","__props","emit","__emit","modalClasses","computed","centered","fullscreen","dialogClasses","size","bodyClasses","bodyPadding","style","zIndex","width","handleClose","handleMaskClick","maskClosable","watch","visible","newVisible","oldVisible","nextTick","handleKeydown","event","key","closable","document","addEventListener","body","overflow","removeEventListener","_createBlock","_Teleport","to","_createVNode","_Transition","name","appear","_createElementBlock","class","value","onClick","_createElementVNode","$slots","header","title","_openBlock","_hoisted_1","_renderSlot","_ctx","_hoisted_2","_toDisplayString","footer","_hoisted_3"],"mappings":"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"}