{"version":3,"file":"library.js","sourceRoot":"","sources":["../../src/types/library.ts"],"names":[],"mappings":"AAAA;;GAEG;AAEH;;GAEG;AACH,MAAM,CAAN,IAAY,WAuBX;AAvBD,WAAY,WAAW;IACrB,mBAAmB;IACnB,wCAAyB,CAAA;IACzB,UAAU;IACV,8BAAe,CAAA;IACf,eAAe;IACf,4BAAa,CAAA;IACb,eAAe;IACf,4BAAa,CAAA;IACb,gBAAgB;IAChB,8BAAe,CAAA;IACf,iBAAiB;IACjB,gCAAiB,CAAA;IACjB,gBAAgB;IAChB,8BAAe,CAAA;IACf,iBAAiB;IACjB,gCAAiB,CAAA;IACjB,6BAA6B;IAC7B,0BAAW,CAAA;IACX,wBAAwB;IACxB,kCAAmB,CAAA;IACnB,UAAU;IACV,8BAAe,CAAA;AACjB,CAAC,EAvBW,WAAW,KAAX,WAAW,QAuBtB","sourcesContent":["/**\n * 库类型相关定义\n */\n\n/**\n * 库类型枚举\n */\nexport enum LibraryType {\n  /** TypeScript 库 */\n  TYPESCRIPT = 'typescript',\n  /** 样式库 */\n  STYLE = 'style',\n  /** Vue2 组件库 */\n  VUE2 = 'vue2',\n  /** Vue3 组件库 */\n  VUE3 = 'vue3',\n  /** React 组件库 */\n  REACT = 'react',\n  /** Svelte 组件库 */\n  SVELTE = 'svelte',\n  /** Solid 组件库 */\n  SOLID = 'solid',\n  /** Preact 组件库 */\n  PREACT = 'preact',\n  /** Lit/Web Components 组件库 */\n  LIT = 'lit',\n  /** Angular 组件库（基础支持） */\n  ANGULAR = 'angular',\n  /** 混合库 */\n  MIXED = 'mixed'\n}\n\n/**\n * 库检测结果\n */\nexport interface LibraryDetectionResult {\n  /** 检测到的库类型 */\n  type: LibraryType\n  /** 置信度 (0-1) */\n  confidence: number\n  /** 检测依据 */\n  evidence: DetectionEvidence[]\n  /** 建议的配置 */\n  suggestedConfig?: Partial<any>\n}\n\n/**\n * 检测依据\n */\nexport interface DetectionEvidence {\n  /** 依据类型 */\n  type: 'file' | 'dependency' | 'config' | 'content' | 'error'\n  /** 依据描述 */\n  description: string\n  /** 权重 */\n  weight: number\n  /** 相关文件或配置 */\n  source?: string\n}\n\n/**\n * TypeScript 库配置\n */\nexport interface TypeScriptLibraryConfig {\n  /** tsconfig.json 路径 */\n  tsconfig?: string\n  /** 是否生成类型声明文件 */\n  declaration?: boolean\n  /** 类型声明文件输出目录 */\n  declarationDir?: string\n  /** 是否生成声明文件映射 */\n  declarationMap?: boolean\n  /** 是否启用 isolatedDeclarations */\n  isolatedDeclarations?: boolean\n  /** 是否跳过库检查 */\n  skipLibCheck?: boolean\n  /** 是否允许合成默认导入 */\n  allowSyntheticDefaultImports?: boolean\n  /** 是否启用严格模式 */\n  strict?: boolean\n  /** 目标 ES 版本 */\n  target?: string\n  /** 模块系统 */\n  module?: string\n  /** 模块解析策略 */\n  moduleResolution?: string\n  /** 基础 URL */\n  baseUrl?: string\n  /** 路径映射 */\n  paths?: Record<string, string[]>\n  /** 类型定义 */\n  types?: string[]\n}\n\n/**\n * Vue 库配置\n */\nexport interface VueLibraryConfig {\n  /** Vue 版本 */\n  version?: 2 | 3\n  /** 是否支持按需加载 */\n  onDemand?: boolean\n  /** 编译器选项 */\n  compilerOptions?: {\n    /** 自定义元素判断函数 */\n    isCustomElement?: (tag: string) => boolean\n    /** 是否保留空白字符 */\n    whitespace?: 'preserve' | 'condense'\n    /** 是否启用注释 */\n    comments?: boolean\n    /** 自定义指令前缀 */\n    directiveTransforms?: Record<string, any>\n  }\n  /** JSX 配置 */\n  jsx?: {\n    /** JSX 工厂函数 */\n    factory?: string\n    /** JSX 片段 */\n    fragment?: string\n    /** 是否启用 JSX */\n    enabled?: boolean\n  }\n  /** 模板配置 */\n  template?: {\n    /** 是否预编译模板 */\n    precompile?: boolean\n    /** 模板编译器选项 */\n    compilerOptions?: Record<string, any>\n  }\n  /** 脚本配置 */\n  script?: {\n    /** 是否启用 defineModel */\n    defineModel?: boolean\n    /** 是否启用 props 解构 */\n    propsDestructure?: boolean\n    /** 其他脚本选项 */\n    [key: string]: any\n  }\n  /** 样式配置 */\n  style?: {\n    /** CSS 模块配置 */\n    modules?: boolean\n    /** 其他样式选项 */\n    [key: string]: any\n  }\n  /** 是否启用 CSS 模块 */\n  cssModules?: boolean\n}\n\n/**\n * Vue JSX 配置\n */\nexport interface VueJsxConfig {\n  /** 包含的文件模式 */\n  include?: RegExp | string | (RegExp | string)[]\n  /** 排除的文件模式 */\n  exclude?: RegExp | string | (RegExp | string)[]\n  /** 是否启用 TypeScript 支持 */\n  typescript?: boolean\n  /** 是否启用优化 */\n  optimize?: boolean\n  /** JSX 工厂函数 */\n  factory?: string\n  /** JSX 片段 */\n  fragment?: string\n  /** JSX 导入源 */\n  jsxImportSource?: string\n  /** 是否启用开发模式 */\n  development?: boolean\n  /** 其他选项 */\n  [key: string]: any\n  /** 样式配置 */\n  style?: {\n    /** 是否修剪样式 */\n    trim?: boolean\n    /** 其他样式选项 */\n    [key: string]: any\n  }\n}\n\n/**\n * 样式库配置\n */\nexport interface StyleLibraryConfig {\n  /** 预处理器类型 */\n  preprocessor?: 'auto' | 'less' | 'scss' | 'sass' | 'stylus' | 'postcss' | {\n    /** Less 配置 */\n    less?: {\n      enabled?: boolean\n      options?: {\n        javascriptEnabled?: boolean\n        modifyVars?: Record<string, any>\n        [key: string]: any\n      }\n    }\n    /** Sass 配置 */\n    sass?: {\n      enabled?: boolean\n      options?: {\n        includePaths?: string[]\n        [key: string]: any\n      }\n    }\n  }\n  /** 是否提取 CSS */\n  extract?: boolean\n  /** 是否压缩 CSS */\n  minimize?: boolean\n  /** 是否启用 autoprefixer */\n  autoprefixer?: boolean\n  /** 浏览器兼容性列表 */\n  browserslist?: string[]\n  /** 是否启用 CSS 模块 */\n  modules?: boolean | {\n    /** 类名生成模式 */\n    generateScopedName?: string | ((name: string, filename: string, css: string) => string)\n    /** 全局模式 */\n    globalModulePaths?: string[]\n    /** 导出全局变量 */\n    exportGlobals?: boolean\n  }\n  /** PostCSS 插件 */\n  postcssPlugins?: any[]\n  /** 变量文件路径 */\n  variablesFile?: string\n  /** 主题配置 */\n  theme?: Record<string, any>\n}\n\n/**\n * 混合库配置\n */\nexport interface MixedLibraryConfig {\n  /** TypeScript 配置 */\n  typescript?: TypeScriptLibraryConfig\n  /** Vue 配置 */\n  vue?: VueLibraryConfig\n  /** 样式配置 */\n  style?: StyleLibraryConfig\n  /** 主要库类型 */\n  primaryType?: LibraryType\n  /** 次要库类型 */\n  secondaryTypes?: LibraryType[]\n}\n\n/**\n * 库元数据\n */\nexport interface LibraryMetadata {\n  /** 库名称 */\n  name: string\n  /** 库版本 */\n  version: string\n  /** 库描述 */\n  description?: string\n  /** 库类型 */\n  type: LibraryType\n  /** 入口文件 */\n  entry: string | string[]\n  /** 输出目录 */\n  outputDir: string\n  /** 依赖列表 */\n  dependencies: string[]\n  /** 开发依赖列表 */\n  devDependencies: string[]\n  /** 对等依赖列表 */\n  peerDependencies: string[]\n  /** 支持的环境 */\n  environments: ('browser' | 'node' | 'worker')[]\n  /** 支持的模块格式 */\n  formats: ('esm' | 'cjs' | 'umd' | 'iife')[]\n  /** 是否支持 Tree Shaking */\n  treeshakable: boolean\n  /** 是否支持按需加载 */\n  sideEffects: boolean | string[]\n}\n\n/**\n * 库分析结果\n */\nexport interface LibraryAnalysisResult {\n  /** 库元数据 */\n  metadata: LibraryMetadata\n  /** 检测结果 */\n  detection: LibraryDetectionResult\n  /** 文件统计 */\n  fileStats: {\n    total: number\n    byType: Record<string, number>\n    bySize: Record<string, number>\n  }\n  /** 依赖分析 */\n  dependencyAnalysis: {\n    total: number\n    external: string[]\n    internal: string[]\n    circular: string[][]\n  }\n  /** 建议的优化 */\n  optimizations: OptimizationSuggestion[]\n}\n\n/**\n * 优化建议\n */\nexport interface OptimizationSuggestion {\n  /** 建议类型 */\n  type: 'performance' | 'size' | 'compatibility' | 'maintainability'\n  /** 建议标题 */\n  title: string\n  /** 建议描述 */\n  description: string\n  /** 影响程度 */\n  impact: 'low' | 'medium' | 'high'\n  /** 实施难度 */\n  difficulty: 'easy' | 'medium' | 'hard'\n  /** 相关配置 */\n  config?: Record<string, any>\n}\n\n/**\n * 库构建选项\n */\nexport interface LibraryBuildOptions {\n  /** 是否启用 bundleless 模式 */\n  bundleless?: boolean\n  /** 是否保留模块结构 */\n  preserveModules?: boolean\n  /** 是否生成类型声明 */\n  generateTypes?: boolean\n  /** 是否压缩代码 */\n  minify?: boolean\n  /** 是否生成 sourcemap */\n  sourcemap?: boolean\n  /** 外部依赖处理 */\n  external?: string[] | ((id: string) => boolean)\n  /** 全局变量映射 */\n  globals?: Record<string, string>\n  /** 输出格式 */\n  formats?: ('esm' | 'cjs' | 'umd' | 'iife')[]\n  /** 代码分割配置 */\n  splitting?: boolean | {\n    /** 手动分块 */\n    manualChunks?: Record<string, string[]>\n    /** 分块策略 */\n    strategy?: 'default' | 'vendor' | 'component'\n  }\n}\n\n/**\n * 库发布配置\n */\nexport interface LibraryPublishConfig {\n  /** 发布注册表 */\n  registry?: string\n  /** 访问级别 */\n  access?: 'public' | 'restricted'\n  /** 标签 */\n  tag?: string\n  /** 是否干运行 */\n  dryRun?: boolean\n  /** 发布前钩子 */\n  beforePublish?: () => Promise<void> | void\n  /** 发布后钩子 */\n  afterPublish?: () => Promise<void> | void\n}\n"]}