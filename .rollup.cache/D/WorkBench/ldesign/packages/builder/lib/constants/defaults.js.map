{"version":3,"file":"defaults.js","sourceRoot":"","sources":["../../src/constants/defaults.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * 默认配置常量\r\n */\r\n\r\nimport type { BuilderConfig } from '../types/config'\r\nimport type { LibraryBuildOptions } from '../types/library'\r\nimport type { PostBuildValidationConfig } from '../types/validation'\r\nimport { LibraryType } from '../types/library'\r\n\r\n/**\r\n * 性能相关常量\r\n */\r\nexport const PERFORMANCE_CONSTANTS = {\r\n  /** 默认文件大小限制 (500KB) */\r\n  DEFAULT_FILE_SIZE_LIMIT: 500 * 1024,\r\n  /** 文件大小警告阈值比例 */\r\n  FILE_SIZE_WARNING_RATIO: 0.8,\r\n  /** 默认内存阈值 (MB) */\r\n  DEFAULT_MEMORY_THRESHOLD: 500,\r\n  /** 默认清理间隔 (ms) */\r\n  DEFAULT_CLEANUP_INTERVAL: 60000,\r\n  /** 默认监控间隔 (ms) */\r\n  DEFAULT_MONITORING_INTERVAL: 10000,\r\n  /** 最大并行任务数 */\r\n  MAX_PARALLEL_TASKS: 4,\r\n  /** 缓存大小 (MB) */\r\n  DEFAULT_CACHE_SIZE: 100\r\n} as const\r\n\r\n/**\r\n * 构建相关常量\r\n */\r\nexport const BUILD_CONSTANTS = {\r\n  /** 默认构建超时时间 (ms) */\r\n  DEFAULT_BUILD_TIMEOUT: 300000, // 5分钟\r\n  /** 默认测试超时时间 (ms) */\r\n  DEFAULT_TEST_TIMEOUT: 60000, // 1分钟\r\n  /** 最大重试次数 */\r\n  MAX_RETRY_COUNT: 3,\r\n  /** 重试延迟基数 (ms) */\r\n  RETRY_DELAY_BASE: 1000\r\n} as const\r\n\r\n/**\r\n * 默认构建器配置\r\n */\r\nexport const DEFAULT_BUILDER_CONFIG: Omit<\r\n  Required<Omit<BuilderConfig, 'env' | 'library' | 'libraryType'>>,\r\n  never\r\n> & {\r\n  env: Record<string, Partial<BuilderConfig>>\r\n  library: Required<LibraryBuildOptions>\r\n  // 默认库类型，可以被自动检测覆盖\r\n  libraryType: LibraryType\r\n} = {\r\n  // 基础配置\r\n  input: 'src/index.ts', // 保留作为兼容，但优先使用 output 中的配置\r\n  libraryType: LibraryType.TYPESCRIPT, // 默认为 TypeScript 库\r\n  // 顶层开关：dts 与 sourcemap（可被各格式覆盖）\r\n  dts: true,\r\n  sourcemap: true,\r\n  output: {\r\n    dir: 'dist',\r\n    format: ['esm', 'cjs'],\r\n    fileName: '[name].[format].js',\r\n    sourcemap: true,\r\n    chunkFileNames: '[name]-[hash].js',\r\n    assetFileNames: '[name]-[hash][extname]',\r\n    // ESM 格式默认配置\r\n    esm: {\r\n      dir: 'es',\r\n      format: 'esm',\r\n      preserveStructure: true,\r\n      dts: true,\r\n      // 默认入口：所有源文件，但排除 UMD 专用入口文件\r\n      input: ['src/**/*.ts', 'src/**/*.js', 'src/**/*.vue', 'src/**/*.tsx', 'src/**/*.jsx', '!src/index-lib.ts', '!src/index-lib.js', '!src/index-umd.ts', '!src/index-umd.js']\r\n    },\r\n    // CommonJS 格式默认配置\r\n    cjs: {\r\n      dir: 'lib',\r\n      format: 'cjs',\r\n      preserveStructure: true,\r\n      dts: true,\r\n      // 默认入口：所有源文件，但排除 UMD 专用入口文件\r\n      input: ['src/**/*.ts', 'src/**/*.js', 'src/**/*.vue', 'src/**/*.tsx', 'src/**/*.jsx', '!src/index-lib.ts', '!src/index-lib.js', '!src/index-umd.ts', '!src/index-umd.js']\r\n    },\r\n    // UMD 格式默认配置\r\n    umd: {\r\n      dir: 'dist',\r\n      format: 'umd',\r\n      minify: true,\r\n      sourcemap: true,\r\n      // UMD 默认单入口：优先使用 index-lib.ts，回退到 index.ts\r\n      input: 'src/index-lib.ts'\r\n    }\r\n  },\r\n\r\n  // 打包器配置\r\n  bundler: 'rollup',\r\n\r\n  // 模式配置\r\n  mode: 'production',\r\n\r\n  // 库类型（自动检测）：默认不设置，交由 LibraryDetector 自动识别\r\n  // libraryType: undefined,\r\n\r\n  // 输出选项\r\n  bundleless: false,\r\n  minify: false, // 默认不压缩\r\n  clean: true,\r\n\r\n  // 排除文件配置\r\n  exclude: [\r\n    '**/__tests__/**',\r\n    '**/*.test.*',\r\n    '**/*.spec.*',\r\n    '**/test/**',\r\n    '**/tests/**',\r\n    '**/*.stories.*',\r\n    '**/stories/**',\r\n    '**/docs/**',\r\n    '**/examples/**'\r\n  ],\r\n\r\n  // UMD 构建配置\r\n  umd: {\r\n    enabled: true,\r\n    entry: 'src/index.ts',\r\n    name: 'MyLibrary', // 默认名称，会自动从 package.json 推断\r\n    forceMultiEntry: false,\r\n    fileName: 'index.umd.js',\r\n    globals: {},\r\n    minify: false // 默认不压缩\r\n  },\r\n\r\n  // Babel 转换配置\r\n  babel: {\r\n    enabled: false, // 默认不启用\r\n    presets: [],\r\n    plugins: [],\r\n    targets: 'defaults',\r\n    polyfill: false,\r\n    runtime: false,\r\n    configFile: false,\r\n    babelrc: true,\r\n    exclude: /node_modules/,\r\n    include: []\r\n  },\r\n\r\n  // Banner 和 Footer 配置\r\n  banner: {\r\n    banner: '',\r\n    footer: '',\r\n    intro: '',\r\n    outro: '',\r\n    copyright: false,\r\n    buildInfo: false\r\n  },\r\n\r\n  // 外部依赖\r\n  external: [],\r\n  globals: {},\r\n\r\n  // 插件配置\r\n  plugins: [],\r\n\r\n  // TypeScript 配置\r\n  typescript: {\r\n    tsconfig: './tsconfig.json',\r\n    declaration: true,\r\n    declarationDir: '', // 默认与 output.dir 相同\r\n    isolatedDeclarations: false,\r\n    skipLibCheck: true,\r\n    allowSyntheticDefaultImports: true,\r\n    strict: true,\r\n    target: 'ES2020',\r\n    module: 'ESNext',\r\n    moduleResolution: 'node'\r\n  },\r\n\r\n  // Vue 配置（仅作为默认项；实际是否启用由库类型检测与策略决定）\r\n  vue: {\r\n    version: 3,\r\n    onDemand: false,\r\n    compilerOptions: {},\r\n    jsx: {\r\n      enabled: false,\r\n      factory: 'h',\r\n      fragment: 'Fragment'\r\n    },\r\n    template: {\r\n      precompile: true\r\n    }\r\n  },\r\n\r\n  // Vue JSX 配置\r\n  vueJsx: {\r\n    include: /\\.[jt]sx$/,\r\n    exclude: /node_modules/,\r\n    typescript: true,\r\n    optimize: false,\r\n    factory: 'h',\r\n    fragment: 'Fragment',\r\n    jsxImportSource: 'vue',\r\n    development: false\r\n  },\r\n\r\n  // 样式配置\r\n  style: {\r\n    preprocessor: 'auto', // 自动检测\r\n    extract: true,\r\n    minimize: true,\r\n    autoprefixer: true,\r\n    modules: false,\r\n    postcssPlugins: []\r\n  },\r\n\r\n  // 性能配置\r\n  performance: {\r\n    bundleAnalyzer: false,\r\n    sizeLimit: '500kb',\r\n    treeshaking: true,\r\n    cache: true,\r\n    parallel: true,\r\n    monitoring: false\r\n  },\r\n\r\n  // 调试配置\r\n  debug: false,\r\n\r\n  // 打包后验证配置\r\n  postBuildValidation: {\r\n    enabled: false,\r\n    testFramework: 'auto',\r\n    testPattern: ['**/*.test.{js,ts}', '**/*.spec.{js,ts}'],\r\n    timeout: 60000,\r\n    failOnError: true,\r\n    environment: {\r\n      tempDir: '.validation-temp',\r\n      keepTempFiles: false,\r\n      env: {},\r\n      packageManager: 'auto',\r\n      installDependencies: true,\r\n      installTimeout: 300000\r\n    },\r\n    reporting: {\r\n      format: 'console',\r\n      outputPath: 'validation-report',\r\n      verbose: false,\r\n      logLevel: 'info',\r\n      includePerformance: true,\r\n      includeCoverage: false\r\n    },\r\n    hooks: {},\r\n    scope: {\r\n      formats: ['esm', 'cjs'],\r\n      fileTypes: ['js', 'ts', 'dts'],\r\n      exclude: ['**/*.d.ts', '**/node_modules/**'],\r\n      include: ['**/*'],\r\n      validateTypes: true,\r\n      validateStyles: false,\r\n      validateSourceMaps: false\r\n    }\r\n  } as PostBuildValidationConfig,\r\n\r\n  // 环境配置\r\n  env: {\r\n    development: {\r\n      mode: 'development',\r\n      minify: false,\r\n      output: {\r\n        sourcemap: 'inline'\r\n      },\r\n      debug: true\r\n    },\r\n    production: {\r\n      mode: 'production',\r\n      minify: true,\r\n      output: {\r\n        sourcemap: true\r\n      },\r\n      debug: false\r\n    }\r\n  },\r\n\r\n  // 缓存配置\r\n  cache: {\r\n    enabled: true,\r\n    dir: 'node_modules/.cache/@ldesign/builder',\r\n    maxAge: 86400000, // 24 hours\r\n    maxSize: 500 * 1024 * 1024 // 500MB\r\n  },\r\n\r\n  // 监听配置\r\n  watch: {\r\n    include: ['src/**/*'],\r\n    exclude: ['node_modules/**/*', 'dist/**/*'],\r\n    persistent: true,\r\n    ignoreInitial: true\r\n  },\r\n\r\n  // 环境变量\r\n  define: {},\r\n\r\n  // 工作目录\r\n  cwd: process.cwd(),\r\n\r\n  // 配置文件路径\r\n  configFile: '.ldesign/builder.config.ts',\r\n\r\n  // 日志级别\r\n  logLevel: 'info',\r\n\r\n  // 库构建选项\r\n  library: {\r\n    bundleless: false,\r\n    preserveModules: false,\r\n    generateTypes: true,\r\n    minify: true,\r\n    sourcemap: true,\r\n    external: [],\r\n    globals: {},\r\n    formats: ['esm', 'cjs'],\r\n    splitting: false\r\n  },\r\n\r\n  // Package.json 自动更新配置\r\n  packageUpdate: {\r\n    enabled: true,\r\n    srcDir: 'src',\r\n    outputDirs: {\r\n      esm: 'es',\r\n      cjs: 'lib',\r\n      umd: 'dist',\r\n      types: 'es'\r\n    },\r\n    autoExports: true,\r\n    updateEntryPoints: true,\r\n    updateFiles: true,\r\n    customExports: {}\r\n  }\r\n}\r\n\r\n/**\r\n * 预设配置\r\n */\r\nexport const PRESET_CONFIGS = {\r\n  // TypeScript 库预设\r\n  typescript: {\r\n    libraryType: LibraryType.TYPESCRIPT,\r\n    typescript: {\r\n      declaration: true,\r\n      isolatedDeclarations: true\r\n    },\r\n    output: {\r\n      format: ['esm', 'cjs']\r\n    },\r\n    library: {\r\n      generateTypes: true,\r\n      formats: ['esm', 'cjs']\r\n    }\r\n  },\r\n\r\n  // Vue3 组件库预设\r\n  vue3: {\r\n    libraryType: LibraryType.VUE3,\r\n    vue: {\r\n      version: 3,\r\n      onDemand: true\r\n    },\r\n    external: ['vue'],\r\n    globals: {\r\n      vue: 'Vue'\r\n    },\r\n    library: {\r\n      formats: ['esm', 'cjs', 'umd']\r\n    }\r\n  },\r\n\r\n  // Vue2 组件库预设\r\n  vue2: {\r\n    libraryType: LibraryType.VUE2,\r\n    vue: {\r\n      version: 2,\r\n      onDemand: true\r\n    },\r\n    external: ['vue'],\r\n    globals: {\r\n      vue: 'Vue'\r\n    },\r\n    library: {\r\n      formats: ['esm', 'cjs', 'umd']\r\n    }\r\n  },\r\n\r\n  // 样式库预设\r\n  style: {\r\n    libraryType: LibraryType.STYLE,\r\n    style: {\r\n      extract: true,\r\n      minimize: true\r\n    },\r\n    output: {\r\n      format: ['esm']\r\n    },\r\n    library: {\r\n      formats: ['esm']\r\n    }\r\n  },\r\n\r\n  // 混合库预设\r\n  mixed: {\r\n    libraryType: LibraryType.MIXED,\r\n    typescript: {\r\n      declaration: true\r\n    },\r\n    style: {\r\n      extract: true\r\n    },\r\n    output: {\r\n      format: ['esm', 'cjs']\r\n    },\r\n    library: {\r\n      formats: ['esm', 'cjs']\r\n    }\r\n  }\r\n} as const\r\n\r\n/**\r\n * 支持的配置文件名称\r\n */\r\nexport const CONFIG_FILE_NAMES = [\r\n  '.ldesign/builder.config.ts',\r\n  '.ldesign/builder.config.js',\r\n  '.ldesign/builder.config.mjs',\r\n  '.ldesign/builder.config.json',\r\n  'ldesign.config.ts',\r\n  'ldesign.config.js',\r\n  'ldesign.config.mjs',\r\n  'ldesign.config.json',\r\n  'builder.config.ts',\r\n  'builder.config.js',\r\n  'builder.config.mjs',\r\n  'builder.config.json',\r\n  '.builderrc.ts',\r\n  '.builderrc.js',\r\n  '.builderrc.json'\r\n] as const\r\n\r\n/**\r\n * 默认外部依赖\r\n */\r\nexport const DEFAULT_EXTERNAL_DEPS = [\r\n  // Node.js 内置模块\r\n  'fs', 'path', 'url', 'util', 'events', 'stream', 'crypto', 'os', 'http', 'https',\r\n\r\n  // 常见的前端框架（通常作为外部依赖）\r\n  'react', 'react-dom', 'vue', '@vue/runtime-core', '@vue/runtime-dom',\r\n  'angular', '@angular/core', '@angular/common',\r\n\r\n  // 常见的工具库\r\n  'lodash', 'moment', 'dayjs', 'axios'\r\n] as const\r\n\r\n/**\r\n * 默认全局变量映射\r\n */\r\nexport const DEFAULT_GLOBALS = {\r\n  'react': 'React',\r\n  'react-dom': 'ReactDOM',\r\n  'vue': 'Vue',\r\n  'lodash': '_',\r\n  'moment': 'moment',\r\n  'dayjs': 'dayjs',\r\n  'axios': 'axios'\r\n} as const\r\n\r\n/**\r\n * 默认文件名模式\r\n */\r\nexport const DEFAULT_FILE_PATTERNS = {\r\n  entry: '[name].[format].js',\r\n  chunk: '[name]-[hash].js',\r\n  asset: '[name]-[hash][extname]',\r\n  types: '[name].d.ts'\r\n} as const\r\n\r\n/**\r\n * 默认缓存配置\r\n */\r\nexport const DEFAULT_CACHE_CONFIG = {\r\n  enabled: true,\r\n  dir: 'node_modules/.cache/@ldesign/builder',\r\n  ttl: 24 * 60 * 60 * 1000, // 24 hours\r\n  maxSize: 500 * 1024 * 1024, // 500MB\r\n  compress: true,\r\n  version: '1.0.0'\r\n} as const\r\n\r\n/**\r\n * 默认性能配置\r\n */\r\nexport const DEFAULT_PERFORMANCE_CONFIG = {\r\n  bundleAnalyzer: false,\r\n  sizeLimit: undefined,\r\n  treeshaking: true,\r\n  cache: true,\r\n  parallel: true,\r\n  memoryLimit: '2GB',\r\n  timeout: 300000, // 5 minutes\r\n  monitoring: false\r\n} as const\r\n\r\n/**\r\n * 默认监听配置\r\n */\r\nexport const DEFAULT_WATCH_CONFIG = {\r\n  include: ['src/**/*'],\r\n  exclude: ['node_modules/**/*', 'dist/**/*', '**/*.test.*', '**/*.spec.*'],\r\n  persistent: true,\r\n  ignoreInitial: true,\r\n  followSymlinks: true,\r\n  usePolling: false,\r\n  interval: 100,\r\n  binaryInterval: 300,\r\n  alwaysStat: false,\r\n  depth: 99,\r\n  awaitWriteFinish: {\r\n    stabilityThreshold: 2000,\r\n    pollInterval: 100\r\n  }\r\n} as const\r\n"]}