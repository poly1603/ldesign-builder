{"version":3,"file":"formats.js","sourceRoot":"","sources":["../../src/constants/formats.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * 输出格式相关常量\n */\n\nimport type { OutputFormat } from '../types/output'\n\n/**\n * 支持的输出格式\n */\nexport const OUTPUT_FORMATS: OutputFormat[] = ['esm', 'cjs', 'umd', 'iife']\n\n/**\n * 格式别名映射\n */\nexport const FORMAT_ALIASES: Record<string, OutputFormat> = {\n  'es': 'esm',\n  'es6': 'esm',\n  'module': 'esm',\n  'commonjs': 'cjs',\n  'common': 'cjs',\n  'universal': 'umd',\n  'browser': 'iife',\n  'global': 'iife'\n}\n\n/**\n * 格式描述\n */\nexport const FORMAT_DESCRIPTIONS: Record<OutputFormat, string> = {\n  esm: 'ES Module - 现代 JavaScript 模块格式，支持 Tree Shaking',\n  cjs: 'CommonJS - Node.js 默认模块格式',\n  umd: 'Universal Module Definition - 通用模块格式，支持多种环境',\n  iife: 'Immediately Invoked Function Expression - 立即执行函数，适用于浏览器',\n  css: 'Cascading Style Sheets - 样式表格式'\n}\n\n/**\n * 格式文件扩展名\n */\nexport const FORMAT_EXTENSIONS: Record<OutputFormat, string> = {\n  esm: '.js',\n  cjs: '.cjs',\n  umd: '.umd.js',\n  iife: '.iife.js',\n  css: '.css'\n}\n\n/**\n * 格式默认文件名模式\n */\nexport const FORMAT_FILE_PATTERNS: Record<OutputFormat, string> = {\n  esm: '[name].js',\n  cjs: '[name].cjs',\n  umd: '[name].umd.js',\n  iife: '[name].iife.js',\n  css: '[name].css'\n}\n\n/**\n * 格式兼容性\n */\nexport const FORMAT_COMPATIBILITY: Record<OutputFormat, {\n  browser: boolean\n  node: boolean\n  requiresGlobals: boolean\n  supportsTreeShaking: boolean\n  supportsCodeSplitting: boolean\n}> = {\n  esm: {\n    browser: true,\n    node: true,\n    requiresGlobals: false,\n    supportsTreeShaking: true,\n    supportsCodeSplitting: true\n  },\n  cjs: {\n    browser: false,\n    node: true,\n    requiresGlobals: false,\n    supportsTreeShaking: false,\n    supportsCodeSplitting: false\n  },\n  umd: {\n    browser: true,\n    node: true,\n    requiresGlobals: true,\n    supportsTreeShaking: false,\n    supportsCodeSplitting: false\n  },\n  iife: {\n    browser: true,\n    node: false,\n    requiresGlobals: true,\n    supportsTreeShaking: false,\n    supportsCodeSplitting: false\n  },\n  css: {\n    browser: true,\n    node: false,\n    requiresGlobals: false,\n    supportsTreeShaking: false,\n    supportsCodeSplitting: false\n  }\n}\n\n/**\n * 格式推荐用途\n */\nexport const FORMAT_USE_CASES: Record<OutputFormat, string[]> = {\n  esm: [\n    '现代 JavaScript 库',\n    '支持 Tree Shaking 的库',\n    'Node.js 模块',\n    '浏览器原生模块'\n  ],\n  cjs: [\n    'Node.js 库',\n    '传统 npm 包',\n    '服务端应用',\n    '构建工具插件'\n  ],\n  umd: [\n    '通用库',\n    '需要多环境支持的库',\n    'CDN 分发的库',\n    '向后兼容的库'\n  ],\n  iife: [\n    '浏览器脚本',\n    '内联脚本',\n    '不支持模块的环境',\n    '简单的工具脚本'\n  ],\n  css: [\n    '样式库',\n    '主题包',\n    '组件样式',\n    'CSS 框架'\n  ]\n}\n\n/**\n * 格式优先级（用于自动选择）\n */\nexport const FORMAT_PRIORITY: Record<OutputFormat, number> = {\n  esm: 4, // 最高优先级\n  cjs: 3,\n  umd: 2,\n  iife: 1,\n  css: 5 // CSS 样式库的最高优先级\n}\n\n/**\n * 格式组合建议\n */\nexport const FORMAT_COMBINATIONS = {\n  // 现代库推荐组合\n  modern: ['esm', 'cjs'] as OutputFormat[],\n\n  // 通用库推荐组合\n  universal: ['esm', 'cjs', 'umd'] as OutputFormat[],\n\n  // 浏览器库推荐组合\n  browser: ['esm', 'umd', 'iife'] as OutputFormat[],\n\n  // Node.js 库推荐组合\n  node: ['esm', 'cjs'] as OutputFormat[],\n\n  // 最小组合\n  minimal: ['esm'] as OutputFormat[],\n\n  // 完整组合\n  complete: ['esm', 'cjs', 'umd', 'iife'] as OutputFormat[]\n}\n\n/**\n * 根据库类型推荐的格式\n */\nexport const LIBRARY_TYPE_FORMATS = {\n  typescript: ['esm', 'cjs'],\n  style: ['esm'],\n  vue2: ['esm', 'cjs', 'umd'],\n  vue3: ['esm', 'cjs', 'umd'],\n  mixed: ['esm', 'cjs']\n} as const\n\n/**\n * 格式特定的配置选项\n */\nexport const FORMAT_SPECIFIC_OPTIONS = {\n  esm: {\n    // ES Module 特定选项\n    exports: 'named',\n    interop: 'auto',\n    strict: true\n  },\n  cjs: {\n    // CommonJS 特定选项\n    exports: 'auto',\n    interop: 'auto',\n    strict: false\n  },\n  umd: {\n    // UMD 特定选项\n    exports: 'auto',\n    interop: 'auto',\n    strict: false,\n    // 需要全局变量名\n    requiresName: true\n  },\n  iife: {\n    // IIFE 特定选项\n    exports: 'none',\n    interop: false,\n    strict: false,\n    // 需要全局变量名\n    requiresName: true\n  }\n} as const\n\n/**\n * 格式验证规则\n */\nexport const FORMAT_VALIDATION_RULES = {\n  esm: {\n    // ES Module 验证规则\n    allowedExports: ['named', 'default'],\n    requiresModernNode: true,\n    supportsTopLevelAwait: true\n  },\n  cjs: {\n    // CommonJS 验证规则\n    allowedExports: ['auto', 'default', 'named'],\n    requiresModernNode: false,\n    supportsTopLevelAwait: false\n  },\n  umd: {\n    // UMD 验证规则\n    allowedExports: ['auto', 'default'],\n    requiresGlobalName: true,\n    requiresGlobalsMapping: true\n  },\n  iife: {\n    // IIFE 验证规则\n    allowedExports: ['none'],\n    requiresGlobalName: true,\n    requiresGlobalsMapping: true\n  }\n} as const\n\n/**\n * 格式性能特征\n */\nexport const FORMAT_PERFORMANCE = {\n  esm: {\n    bundleSize: 'small',\n    loadTime: 'fast',\n    treeShaking: 'excellent',\n    caching: 'excellent'\n  },\n  cjs: {\n    bundleSize: 'medium',\n    loadTime: 'medium',\n    treeShaking: 'none',\n    caching: 'good'\n  },\n  umd: {\n    bundleSize: 'large',\n    loadTime: 'slow',\n    treeShaking: 'none',\n    caching: 'fair'\n  },\n  iife: {\n    bundleSize: 'large',\n    loadTime: 'slow',\n    treeShaking: 'none',\n    caching: 'poor'\n  }\n} as const\n"]}