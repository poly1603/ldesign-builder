{"version":3,"file":"tdesign-builder.js","sourceRoot":"","sources":["../../src/utils/tdesign-builder.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * TDesign È£éÊ†ºÁöÑÊûÑÂª∫Â∑•ÂÖ∑ÂáΩÊï∞\n * \n * Êèê‰æõ‰æøÊç∑ÁöÑ TDesign È£éÊ†ºÊûÑÂª∫ÂáΩÊï∞\n * \n * @author LDesign Team\n * @version 1.0.0\n */\n\nimport type { BuilderConfig, MultiFormatBuildConfig, CSSBuildStrategy } from '../types/config'\nimport { TDesignStyleBuilder } from '../core/TDesignStyleBuilder'\n\n/**\n * ÂàõÂª∫ TDesign È£éÊ†ºÁöÑÊûÑÂª∫ÈÖçÁΩÆ\n */\nexport function createTDesignConfig(options: {\n  /** ÂÖ•Âè£Êñá‰ª∂ */\n  input?: string | string[] | Record<string, string>\n  \n  /** ËæìÂá∫ÁõÆÂΩï */\n  outDir?: string\n  \n  /** Â∫ìÂêçÁß∞ÔºàÁî®‰∫é UMD ÊûÑÂª∫Ôºâ */\n  name?: string\n  \n  /** ÊòØÂê¶ÂêØÁî®Â§öÊ†ºÂºèÊûÑÂª∫ */\n  multiFormat?: boolean | MultiFormatBuildConfig\n  \n  /** CSS Â§ÑÁêÜÁ≠ñÁï• */\n  cssStrategy?: CSSBuildStrategy\n  \n  /** Â§ñÈÉ®‰æùËµñ */\n  external?: string[]\n  \n  /** ÂÖ®Â±ÄÂèòÈáèÊò†Â∞Ñ */\n  globals?: Record<string, string>\n  \n  /** ÊòØÂê¶ÁîüÊàê sourcemap */\n  sourcemap?: boolean\n  \n  /** ÊòØÂê¶ÂéãÁº©‰ª£Á†Å */\n  minify?: boolean\n}): BuilderConfig {\n  const {\n    input = 'src/index.ts',\n    outDir = '.',\n    name = 'LDesign',\n    multiFormat = true,\n    cssStrategy = 'multi',\n    external = ['vue'],\n    globals = { vue: 'Vue' },\n    sourcemap = true,\n    minify = false\n  } = options\n\n  // Â§ÑÁêÜÂ§öÊ†ºÂºèÈÖçÁΩÆ\n  let multiFormatConfig: MultiFormatBuildConfig | undefined\n  if (multiFormat === true) {\n    multiFormatConfig = {\n      es: true,\n      esm: true,\n      lib: true,\n      cjs: true,\n      umd: true,\n      umdMin: true\n    }\n  } else if (typeof multiFormat === 'object') {\n    multiFormatConfig = multiFormat\n  }\n\n  return {\n    input,\n    libraryType: 'vue3' as any,\n    bundler: 'rollup',\n    external,\n    globals,\n    sourcemap,\n    minify,\n    multiFormat: multiFormatConfig,\n    cssStrategy,\n    umd: {\n      name,\n      filename: 'index'\n    },\n    output: {\n      dir: outDir\n    },\n    vue: {\n      version: 3\n    },\n    style: {\n      extract: true\n    }\n  }\n}\n\n/**\n * ÊûÑÂª∫ ES Ê®°ÂùóÔºàÊîØÊåÅ tree-shakingÔºâ\n */\nexport async function buildEs(config?: Partial<BuilderConfig>): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  const finalConfig = createTDesignConfig({\n    multiFormat: { es: true },\n    cssStrategy: 'multi',\n    ...config\n  })\n  \n  await builder.buildEs(finalConfig)\n}\n\n/**\n * ÊûÑÂª∫ ESM Ê®°ÂùóÔºà‰øùÁïôÊ∫êÁ†ÅÊ†∑ÂºèÂºïÁî®Ôºâ\n */\nexport async function buildEsm(config?: Partial<BuilderConfig>): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  const finalConfig = createTDesignConfig({\n    multiFormat: { esm: true },\n    cssStrategy: 'source',\n    ...config\n  })\n  \n  await builder.buildEsm(finalConfig)\n}\n\n/**\n * ÊûÑÂª∫ Lib Ê†ºÂºè\n */\nexport async function buildLib(config?: Partial<BuilderConfig>): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  const finalConfig = createTDesignConfig({\n    multiFormat: { lib: true },\n    cssStrategy: 'ignore',\n    ...config\n  })\n  \n  await builder.buildLib(finalConfig)\n}\n\n/**\n * ÊûÑÂª∫ CJS Ê†ºÂºè\n */\nexport async function buildCjs(config?: Partial<BuilderConfig>): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  const finalConfig = createTDesignConfig({\n    multiFormat: { cjs: true },\n    cssStrategy: 'ignore',\n    ...config\n  })\n  \n  await builder.buildCjs(finalConfig)\n}\n\n/**\n * ÊûÑÂª∫ UMD Ê†ºÂºè\n */\nexport async function buildUmd(config?: Partial<BuilderConfig>, isMin = false): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  const finalConfig = createTDesignConfig({\n    multiFormat: { umd: true },\n    cssStrategy: 'single',\n    minify: isMin,\n    ...config\n  })\n  \n  await builder.buildUmd(finalConfig, isMin)\n}\n\n/**\n * ÊûÑÂª∫ÊâÄÊúâÊ†ºÂºèÔºàTDesign È£éÊ†ºÔºâ\n */\nexport async function buildComponents(config?: Partial<BuilderConfig>): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  const finalConfig = createTDesignConfig({\n    multiFormat: true,\n    cssStrategy: 'multi',\n    ...config\n  })\n  \n  await builder.buildComponents(finalConfig)\n}\n\n/**\n * Âà†Èô§ËæìÂá∫ÁõÆÂΩï\n */\nexport async function deleteOutput(): Promise<void> {\n  const builder = new TDesignStyleBuilder()\n  await builder.deleteOutput()\n}\n\n/**\n * ÊûÑÂª∫ÈáçÁΩÆÊ†∑Âºè CSS\n */\nexport async function buildResetCss(config?: Partial<BuilderConfig>): Promise<void> {\n  console.log('üé® ÊûÑÂª∫ÈáçÁΩÆÊ†∑Âºè CSS...')\n  \n  const builder = new TDesignStyleBuilder()\n  const resetConfig = createTDesignConfig({\n    input: 'src/styles/reset.less',\n    cssStrategy: 'single',\n    ...config,\n    output: {\n      file: 'dist/reset.css'\n    }\n  })\n  \n  await builder.build(resetConfig)\n  console.log('‚úÖ ÈáçÁΩÆÊ†∑Âºè CSS ÊûÑÂª∫ÂÆåÊàê')\n}\n\n/**\n * ÊûÑÂª∫Êèí‰ª∂Ê†∑Âºè CSS\n */\nexport async function buildPluginCss(config?: Partial<BuilderConfig>): Promise<void> {\n  console.log('üé® ÊûÑÂª∫Êèí‰ª∂Ê†∑Âºè CSS...')\n  \n  const builder = new TDesignStyleBuilder()\n  const pluginConfig = createTDesignConfig({\n    input: 'src/styles/plugin.less',\n    cssStrategy: 'single',\n    ...config,\n    output: {\n      file: 'dist/plugin.css'\n    }\n  })\n  \n  await builder.build(pluginConfig)\n  console.log('‚úÖ Êèí‰ª∂Ê†∑Âºè CSS ÊûÑÂª∫ÂÆåÊàê')\n}\n\n/**\n * ÂÆåÊï¥ÁöÑ TDesign È£éÊ†ºÊûÑÂª∫ÊµÅÁ®ã\n */\nexport async function buildAll(config?: Partial<BuilderConfig>): Promise<void> {\n  console.log('üöÄ ÂºÄÂßãÂÆåÊï¥ÁöÑ TDesign È£éÊ†ºÊûÑÂª∫...')\n  \n  // Âà†Èô§ËæìÂá∫ÁõÆÂΩï\n  await deleteOutput()\n  \n  // ÊûÑÂª∫ÊâÄÊúâÊ†ºÂºè\n  await buildComponents(config)\n  \n  // ÊûÑÂª∫È¢ùÂ§ñÁöÑ CSS Êñá‰ª∂\n  try {\n    await buildResetCss(config)\n  } catch (error) {\n    console.warn('‚ö†Ô∏è ÈáçÁΩÆÊ†∑ÂºèÊûÑÂª∫Â§±Ë¥•:', error)\n  }\n  \n  try {\n    await buildPluginCss(config)\n  } catch (error) {\n    console.warn('‚ö†Ô∏è Êèí‰ª∂Ê†∑ÂºèÊûÑÂª∫Â§±Ë¥•:', error)\n  }\n  \n  console.log('üéâ ÂÆåÊï¥ÁöÑ TDesign È£éÊ†ºÊûÑÂª∫ÂÆåÊàêÔºÅ')\n}\n"]}