{"version":3,"file":"Vue3Strategy.js","sourceRoot":"","sources":["../../../src/strategies/vue3/Vue3Strategy.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Vue 3 组件库构建策略\n *\n * 为 Vue 3 组件库提供完整的构建策略，包括：\n * - Vue SFC 单文件组件编译\n * - TypeScript 支持\n * - 样式提取和处理\n * - 组件类型定义生成\n * - 插件式安装支持\n *\n * @author LDesign Team\n * @version 1.0.0\n */\n\nimport type { ILibraryStrategy } from '../../types/strategy'\nimport { LibraryType } from '../../types/library'\nimport type { BuilderConfig, MultiFormatBuildConfig, CSSBuildStrategy } from '../../types/config'\nimport type { UnifiedConfig } from '../../types/adapter'\nimport { shouldMinify } from '../../utils/minify-processor'\n\n/**\n * Vue 3 组件库构建策略\n */\nexport class Vue3Strategy implements ILibraryStrategy {\n  readonly name = 'vue3'\n  readonly supportedTypes: LibraryType[] = [LibraryType.VUE3]\n  readonly priority = 10\n\n  /**\n   * 应用 Vue 3 策略\n   */\n  async applyStrategy(config: BuilderConfig): Promise<UnifiedConfig> {\n    // 如果启用了多格式构建，返回多个构建配置\n    if (config.multiFormat) {\n      return this.applyMultiFormatStrategy(config)\n    }\n\n    // 解析入口配置\n    const resolvedInput = await this.resolveInputEntries(config)\n\n    const unifiedConfig: UnifiedConfig = {\n      input: resolvedInput,\n      output: this.buildOutputConfig(config),\n      plugins: await this.buildPlugins(config),\n      external: this.buildExternals(config),\n      treeshake: config.performance?.treeshaking !== false,\n      onwarn: this.createWarningHandler()\n    }\n\n    return unifiedConfig\n  }\n\n  /**\n   * 应用多格式构建策略（TDesign 风格）\n   */\n  async applyMultiFormatStrategy(config: BuilderConfig): Promise<UnifiedConfig> {\n    const multiFormat = config.multiFormat!\n    const cssStrategy = config.cssStrategy || 'multi'\n\n    // 解析入口配置\n    const resolvedInput = await this.resolveInputEntries(config)\n\n    // 构建多个输出配置\n    const outputs = this.buildMultiFormatOutputs(config, multiFormat)\n\n    const unifiedConfig: UnifiedConfig = {\n      input: resolvedInput,\n      output: outputs,\n      plugins: await this.buildMultiFormatPlugins(config, cssStrategy),\n      external: this.buildExternals(config),\n      treeshake: config.performance?.treeshaking !== false,\n      onwarn: this.createWarningHandler()\n    }\n\n    return unifiedConfig\n  }\n\n  /**\n   * 检查策略是否适用\n   */\n  isApplicable(config: BuilderConfig): boolean {\n    return config.libraryType === LibraryType.VUE3\n  }\n\n  /**\n   * 获取默认配置\n   */\n  getDefaultConfig(): Partial<BuilderConfig> {\n    return {\n      libraryType: LibraryType.VUE3,\n      output: {\n        format: ['esm', 'cjs'],\n        sourcemap: true\n      },\n      vue: {\n        version: 3,\n        jsx: {\n          enabled: true\n        },\n        template: {\n          precompile: true\n        }\n      },\n      typescript: {\n        declaration: true,\n        declarationDir: 'dist',\n        target: 'ES2020',\n        module: 'ESNext',\n        strict: true\n      },\n      style: {\n        extract: true,\n        minimize: true,\n        autoprefixer: true\n      },\n      performance: {\n        treeshaking: true,\n        minify: true\n      },\n      external: ['vue']\n    }\n  }\n\n  /**\n   * 获取推荐插件\n   */\n  getRecommendedPlugins(config: BuilderConfig): any[] {\n    const plugins = []\n\n    // Vue SFC 插件\n    plugins.push({\n      name: 'rollup-plugin-vue',\n      options: this.getVueOptions(config)\n    })\n\n    // TypeScript 插件\n    plugins.push({\n      name: '@rollup/plugin-typescript',\n      options: this.getTypeScriptOptions(config)\n    })\n\n    // Node 解析插件\n    plugins.push({\n      name: '@rollup/plugin-node-resolve',\n      options: {\n        preferBuiltins: false,\n        browser: true\n      }\n    })\n\n    // CommonJS 插件\n    plugins.push({\n      name: '@rollup/plugin-commonjs',\n      options: {}\n    })\n\n    // 样式处理插件\n    if (config.style?.extract !== false) {\n      plugins.push({\n        name: 'rollup-plugin-postcss',\n        options: this.getPostCSSOptions(config)\n      })\n    }\n\n    // DTS 文件复制插件（如果存在 types 目录）\n    if (config.dts !== false) {\n      plugins.push(this.createDtsCopyPlugin(config))\n    }\n\n    // 代码压缩插件（生产模式）\n    if (shouldMinify(config)) {\n      plugins.push({\n        name: '@rollup/plugin-terser',\n        options: {\n          compress: {\n            drop_console: true,\n            drop_debugger: true\n          },\n          format: {\n            comments: false\n          }\n        }\n      })\n    }\n\n    return plugins\n  }\n\n  /**\n   * 验证配置\n   */\n  validateConfig(config: BuilderConfig): any {\n    const errors: string[] = []\n    const warnings: string[] = []\n    const suggestions: string[] = []\n\n    // 检查入口文件\n    if (!config.input) {\n      errors.push('Vue 3 策略需要指定入口文件')\n    }\n\n    // 检查 Vue 版本\n    if (config.vue?.version && config.vue.version !== 3) {\n      warnings.push('当前策略针对 Vue 3 优化，建议使用 Vue 3')\n    }\n\n    // 检查外部依赖\n    if (Array.isArray(config.external) && !config.external.includes('vue')) {\n      suggestions.push('建议将 Vue 添加到外部依赖中以减少包体积')\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors,\n      warnings,\n      suggestions\n    }\n  }\n\n  /**\n   * 构建输出配置\n   */\n  private buildOutputConfig(config: BuilderConfig): any {\n    const outputConfig = config.output || {}\n\n    // 如果使用格式特定配置（output.esm, output.cjs, output.umd），直接返回\n    if (outputConfig.esm || outputConfig.cjs || outputConfig.umd) {\n      const result = { ...outputConfig }\n\n      // 为每个输出格式添加 assetFileNames 配置\n      if (result.esm && typeof result.esm === 'object') {\n        result.esm = {\n          ...result.esm,\n          assetFileNames: '[name].[ext]',\n          globals: {\n            vue: 'Vue',\n            ...result.esm.globals\n          }\n        }\n      }\n\n      if (result.cjs && typeof result.cjs === 'object') {\n        result.cjs = {\n          ...result.cjs,\n          assetFileNames: '[name].[ext]',\n          globals: {\n            vue: 'Vue',\n            ...result.cjs.globals\n          }\n        }\n      }\n\n      if (result.umd && typeof result.umd === 'object') {\n        result.umd = {\n          ...result.umd,\n          assetFileNames: '[name].[ext]',\n          globals: {\n            vue: 'Vue',\n            ...result.umd.globals\n          }\n        }\n      }\n\n      // 确保全局变量包含 Vue\n      result.globals = {\n        vue: 'Vue',\n        ...result.globals\n      }\n\n      return result\n    }\n\n    // 否则使用传统的 format 数组配置\n    const formats = Array.isArray(outputConfig.format)\n      ? outputConfig.format\n      : [outputConfig.format || 'esm']\n\n    return {\n      dir: outputConfig.dir || 'dist',\n      format: formats,\n      sourcemap: outputConfig.sourcemap !== false,\n      exports: 'named',\n      globals: {\n        vue: 'Vue',\n        ...outputConfig.globals\n      }\n    }\n  }\n\n  /**\n   * 构建插件配置\n   */\n  private async buildPlugins(config: BuilderConfig): Promise<any[]> {\n    const plugins: any[] = []\n\n    try {\n      // Vue TSX/JSX 支持（必须在 Vue SFC 插件之前）\n      try {\n        const { default: VueJsx } = await import('unplugin-vue-jsx/rollup')\n        plugins.push(VueJsx({\n          version: 3, // Vue 3\n          optimize: config.mode === 'production'\n        }))\n      } catch (e) {\n        // 如果未安装 JSX 插件，则跳过（仍然允许纯 Vue SFC 构建）\n        console.warn('unplugin-vue-jsx 未安装，跳过 JSX/TSX 支持')\n      }\n\n      // Vue SFC 插件（使用 rollup-plugin-vue，更稳定）\n      const VuePlugin = await import('rollup-plugin-vue')\n\n      // 注册 TypeScript 支持以解决 \"No fs option provided to compileScript\" 错误\n      try {\n        const { registerTS } = await import('@vue/compiler-sfc')\n        const typescript = await import('typescript')\n        registerTS(() => typescript.default)\n      } catch (error) {\n        // 如果无法导入 TypeScript 或 @vue/compiler-sfc，继续执行\n        console.warn('Failed to register TypeScript support for Vue SFC:', error)\n      }\n\n      plugins.push(VuePlugin.default({\n        preprocessStyles: true,\n        // 只处理 .vue 文件\n        include: /\\.vue$/,\n        ...this.getVueOptions(config)\n      }))\n\n      // Node 解析插件\n      const nodeResolve = await import('@rollup/plugin-node-resolve')\n      plugins.push(nodeResolve.default({\n        preferBuiltins: false,\n        browser: true,\n        extensions: ['.mjs', '.js', '.json', '.ts', '.tsx', '.vue']\n      }))\n\n      // CommonJS 插件\n      const commonjs = await import('@rollup/plugin-commonjs')\n      plugins.push(commonjs.default())\n      // esbuild 插件处理 TypeScript 和 JSX（保留 JSX 语法）\n      const { default: esbuild } = await import('rollup-plugin-esbuild')\n      plugins.push(esbuild({\n        include: /\\.(ts|tsx|js|jsx)$/,\n        exclude: [/node_modules/],\n        target: 'es2020',\n        // 保留 JSX/TSX 以便后续由 Vue JSX 插件处理\n        jsx: 'preserve',\n        tsconfig: 'tsconfig.json',\n        minify: shouldMinify(config),\n        sourceMap: config.output?.sourcemap !== false\n      }))\n\n      // JSON 插件\n      const json = await import('@rollup/plugin-json')\n      plugins.push(json.default())\n\n      // 样式处理插件（使用 rollup-plugin-styles，更好的 Vue SFC 支持）\n      try {\n        const Styles = await import('rollup-plugin-styles')\n        plugins.push(Styles.default({\n          mode: 'extract',\n          modules: false,\n          minimize: shouldMinify(config),\n          namedExports: true,\n          include: [\n            '**/*.less',\n            '**/*.css',\n            '**/*.scss',\n            '**/*.sass'\n          ],\n          url: {\n            inline: false,\n          },\n          ...this.getStylesOptions(config)\n        }))\n      } catch (e) {\n        // 如果 rollup-plugin-styles 不可用，回退到 postcss\n        const postcss = await import('rollup-plugin-postcss')\n        plugins.push(postcss.default({\n          ...this.getPostCSSOptions(config),\n          include: [\n            /\\.(css|less|scss|sass)$/,\n            /\\?vue&type=style/\n          ]\n        }))\n      }\n    } catch (error) {\n      console.error('插件加载失败:', error)\n    }\n\n    // 添加 DTS 复制插件\n    plugins.push(this.createDtsCopyPlugin(config))\n\n    return plugins\n  }\n\n  /**\n   * 构建外部依赖配置\n   */\n  private buildExternals(config: BuilderConfig): string[] | ((id: string) => boolean) {\n    let externals: string[] = []\n\n    if (Array.isArray(config.external)) {\n      externals = [...config.external]\n    } else if (typeof config.external === 'function') {\n      // 如果是函数，直接返回\n      return config.external\n    } else {\n      externals = []\n    }\n\n    // 确保 Vue 是外部依赖\n    if (!externals.includes('vue')) {\n      externals.push('vue')\n    }\n\n    // 添加 node_modules 排除规则\n    return (id: string) => {\n      // 排除 node_modules 中的所有模块\n      if (id.includes('node_modules')) {\n        return true\n      }\n\n      // 检查是否在外部依赖列表中\n      return externals.some(ext => {\n        return id === ext || id.startsWith(ext + '/')\n      })\n    }\n  }\n\n  /**\n   * 获取 Vue 选项\n   */\n  private getVueOptions(config: BuilderConfig): any {\n    const vueConfig = config.vue || {}\n\n    return {\n      include: /\\.vue$/,\n      exclude: /node_modules/,\n      // 模板编译选项\n      template: {\n        compilerOptions: {\n          isCustomElement: (tag: string) => tag.startsWith('ld-') || tag.startsWith('template-'),\n          // 启用生产优化\n          hoistStatic: config.mode === 'production',\n          cacheHandlers: config.mode === 'production',\n        },\n        ...vueConfig.template\n      },\n      // 脚本处理选项\n      script: {\n        // 启用 defineModel 宏\n        defineModel: true,\n        // 启用 props 解构\n        propsDestructure: true,\n        ...vueConfig.script\n      },\n      // 样式处理选项\n      style: {\n        // 启用 CSS 模块\n        modules: vueConfig.cssModules !== false,\n        ...vueConfig.style\n      },\n      // 传递其他用户配置\n      ...vueConfig\n    }\n  }\n\n  /**\n   * 获取 TypeScript 选项\n   */\n  private getTypeScriptOptions(config: BuilderConfig): any {\n    const tsConfig = config.typescript || {}\n\n    return {\n      target: tsConfig.target || 'ES2020',\n      module: tsConfig.module || 'ESNext',\n      declaration: tsConfig.declaration !== false,\n      // declarationDir 将由 RollupAdapter 动态设置\n      strict: tsConfig.strict !== false,\n      esModuleInterop: true,\n      allowSyntheticDefaultImports: true,\n      skipLibCheck: true,\n      moduleResolution: 'node',\n      resolveJsonModule: true,\n      // JSX 配置\n      jsx: 'preserve',\n      jsxImportSource: 'vue',\n      // Vue 相关类型\n      types: ['vue', '@vue/runtime-core', ...(tsConfig.types || [])],\n      // 路径映射\n      paths: {\n        '@/*': ['src/*'],\n        ...tsConfig.paths\n      },\n      ...tsConfig\n    }\n  }\n\n  /**\n   * 获取 PostCSS 选项\n   */\n  private getPostCSSOptions(config: BuilderConfig): any {\n    return {\n      extract: config.style?.extract !== false,\n      minimize: config.style?.minimize !== false,\n      sourceMap: config.output?.sourcemap !== false,\n      modules: config.style?.modules || false,\n      // 支持 less/scss 等预处理器\n      use: ['less'],\n      extensions: ['.css', '.less', '.scss', '.sass']\n    }\n  }\n\n  /**\n   * 获取 rollup-plugin-styles 选项\n   */\n  private getStylesOptions(config: BuilderConfig): any {\n    return {\n      // 样式提取配置\n      extract: config.style?.extract !== false,\n      minimize: shouldMinify(config),\n      sourceMap: config.output?.sourcemap !== false,\n      modules: config.style?.modules || false,\n      // 支持的文件扩展名\n      extensions: ['.css', '.less', '.scss', '.sass'],\n      // 预处理器配置\n      less: {\n        javascriptEnabled: true\n      },\n      scss: {\n        includePaths: ['node_modules']\n      }\n    }\n  }\n\n  /**\n   * 创建 DTS 文件生成插件\n   */\n  private createDtsCopyPlugin(config?: BuilderConfig): any {\n    return {\n      name: 'generate-dts-files',\n      writeBundle: async (options: any) => {\n        // 检查是否为 silent 模式，如果是则不输出调试信息\n        const isSilent = config?.logLevel === 'silent'\n\n        if (!isSilent) {\n          console.log('🔍 DTS 插件被调用，options:', options)\n        }\n\n        try {\n          const outputDir = options.dir\n          if (!outputDir) {\n            if (!isSilent) {\n              console.log('⚠️ 输出目录为空')\n            }\n            return\n          }\n\n          if (!isSilent) {\n            console.log('🔧 开始生成 TypeScript 声明文件')\n          }\n          await this.generateDtsFiles(outputDir, config)\n\n        } catch (error) {\n          if (!isSilent) {\n            console.warn('⚠️ 处理 DTS 文件失败:', error instanceof Error ? error.message : String(error))\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * 使用 TypeScript 编译器生成 DTS 文件\n   */\n  private async generateDtsFiles(outputDir: string, config?: BuilderConfig): Promise<void> {\n    const isSilent = config?.logLevel === 'silent'\n\n    try {\n      const fs = await import('fs')\n      const path = await import('path')\n\n      // 尝试导入 TypeScript\n      let ts: any\n      try {\n        ts = await import('typescript')\n      } catch (error) {\n        if (!isSilent) {\n          console.warn('⚠️ 无法导入 TypeScript，跳过 DTS 生成')\n        }\n        return\n      }\n\n      const rootDir = process.cwd()\n      const srcDir = path.join(rootDir, 'src')\n      const tsconfigPath = path.join(rootDir, 'tsconfig.json')\n\n      // 检查 src 目录和 tsconfig.json 是否存在\n      if (!fs.existsSync(srcDir)) {\n        if (!isSilent) {\n          console.log('⚠️ src 目录不存在，跳过 DTS 生成')\n        }\n        return\n      }\n\n      // 读取和解析 tsconfig.json\n      let parsedConfig: any\n      if (fs.existsSync(tsconfigPath)) {\n        const tsconfigContent = fs.readFileSync(tsconfigPath, 'utf-8')\n        const configFile = ts.parseConfigFileTextToJson(tsconfigPath, tsconfigContent)\n\n        if (configFile.error) {\n          if (!isSilent) {\n            console.warn('⚠️ 解析 tsconfig.json 失败:', configFile.error.messageText)\n          }\n          parsedConfig = { compilerOptions: {} }\n        } else {\n          parsedConfig = ts.parseJsonConfigFileContent(\n            configFile.config,\n            ts.sys,\n            path.dirname(tsconfigPath)\n          )\n        }\n      } else {\n        if (!isSilent) {\n          console.log('⚠️ tsconfig.json 不存在，使用默认配置')\n        }\n        parsedConfig = {\n          options: {},\n          fileNames: [],\n          errors: []\n        }\n      }\n\n      // 获取所有 TypeScript 文件\n      const glob = await import('glob')\n      const tsFiles = await glob.glob('**/*.{ts,tsx}', {\n        cwd: srcDir,\n        absolute: true,\n        ignore: ['**/*.test.ts', '**/*.spec.ts', '**/__tests__/**', '**/*.d.ts']\n      })\n\n      if (tsFiles.length === 0) {\n        if (!isSilent) {\n          console.log('⚠️ 没有找到 TypeScript 文件')\n        }\n        return\n      }\n\n      if (!isSilent) {\n        console.log(`🔧 开始生成 ${tsFiles.length} 个文件的 TypeScript 声明文件`)\n      }\n\n      // 创建编译选项\n      const compilerOptions: any = {\n        ...parsedConfig.options,\n        declaration: true,\n        emitDeclarationOnly: true,\n        outDir: outputDir,\n        rootDir: srcDir,\n        skipLibCheck: true,\n        moduleResolution: ts.ModuleResolutionKind.NodeJs,\n        target: ts.ScriptTarget.ES2020,\n        module: ts.ModuleKind.ESNext,\n        jsx: ts.JsxEmit.ReactJSX,\n        allowSyntheticDefaultImports: true,\n        esModuleInterop: true,\n        strict: false,\n        noEmitOnError: false\n      }\n\n      // 创建编译器主机\n      const host = ts.createCompilerHost(compilerOptions)\n\n      // 创建 TypeScript 程序\n      const program = ts.createProgram(tsFiles, compilerOptions, host)\n\n      // 生成声明文件\n      const emitResult = program.emit(undefined, undefined, undefined, true)\n\n      // 检查编译错误\n      const allDiagnostics = ts.getPreEmitDiagnostics(program).concat(emitResult.diagnostics)\n\n      if (allDiagnostics.length > 0 && !isSilent) {\n        console.warn('⚠️ TypeScript 编译警告:')\n        allDiagnostics.forEach((diagnostic: any) => {\n          if (diagnostic.file) {\n            const { line, character } = diagnostic.file.getLineAndCharacterOfPosition(diagnostic.start!)\n            const message = ts.flattenDiagnosticMessageText(diagnostic.messageText, '\\n')\n            console.warn(`  ${path.relative(rootDir, diagnostic.file.fileName)} (${line + 1},${character + 1}): ${message}`)\n          } else {\n            console.warn(`  ${ts.flattenDiagnosticMessageText(diagnostic.messageText, '\\n')}`)\n          }\n        })\n      }\n\n      if (emitResult.emitSkipped) {\n        if (!isSilent) {\n          console.warn('⚠️ TypeScript 声明文件生成失败')\n        }\n      } else {\n        // 统计生成的 .d.ts 文件数量\n        const generatedDtsFiles = await glob.glob('**/*.d.ts', {\n          cwd: outputDir,\n          absolute: false\n        })\n        if (!isSilent) {\n          console.log(`✅ TypeScript 声明文件生成成功，共生成 ${generatedDtsFiles.length} 个 .d.ts 文件`)\n        }\n      }\n\n    } catch (error) {\n      if (!isSilent) {\n        console.warn('⚠️ 生成 TypeScript 声明文件失败:', error instanceof Error ? error.message : String(error))\n      }\n    }\n  }\n\n  /**\n   * 创建警告处理器\n   */\n  private createWarningHandler() {\n    return (warning: any) => {\n      // 忽略一些常见的无害警告\n      if (warning.code === 'THIS_IS_UNDEFINED') {\n        return\n      }\n\n      if (warning.code === 'CIRCULAR_DEPENDENCY') {\n        return\n      }\n\n      console.warn(`Warning: ${warning.message}`)\n    }\n  }\n\n  /**\n   * 解析入口配置\n   * - 若用户未传入 input，则将 src 下所有源文件作为入口（排除测试与声明文件）\n   * - 若用户传入 glob 模式的数组，则解析为多入口\n   * - 若用户传入单个文件或对象，则直接返回\n   */\n  private async resolveInputEntries(config: BuilderConfig): Promise<string | string[] | Record<string, string>> {\n    // 如果没有提供input，自动扫描src目录\n    if (!config.input) {\n      return this.autoDiscoverEntries()\n    }\n\n    // 如果是字符串数组且包含glob模式，解析为多入口\n    if (Array.isArray(config.input)) {\n      return this.resolveGlobEntries(config.input)\n    }\n\n    // 其他情况直接返回用户配置\n    return config.input\n  }\n\n  /**\n   * 自动发现入口文件\n   */\n  private async autoDiscoverEntries(): Promise<string | Record<string, string>> {\n    const { findFiles } = await import('../../utils/file-system')\n    const { relative, extname } = await import('path')\n\n    const files = await findFiles([\n      'src/**/*.{ts,tsx,js,jsx,vue,json}'\n    ], {\n      cwd: process.cwd(),\n      ignore: ['**/*.d.ts', '**/*.test.*', '**/*.spec.*', '**/__tests__/**']\n    })\n\n    if (files.length === 0) return 'src/index.ts'\n\n    const entryMap: Record<string, string> = {}\n    for (const abs of files) {\n      const rel = relative(process.cwd(), abs)\n      const relFromSrc = rel.replace(/^src[\\\\/]/, '')\n      const noExt = relFromSrc.slice(0, relFromSrc.length - extname(relFromSrc).length)\n      const key = noExt.replace(/\\\\/g, '/')\n      entryMap[key] = abs\n    }\n    return entryMap\n  }\n\n  /**\n   * 解析glob模式的入口配置\n   */\n  private async resolveGlobEntries(patterns: string[]): Promise<Record<string, string>> {\n    const { findFiles } = await import('../../utils/file-system')\n    const { relative, extname } = await import('path')\n\n    const files = await findFiles(patterns, {\n      cwd: process.cwd(),\n      ignore: ['**/*.d.ts', '**/*.test.*', '**/*.spec.*', '**/__tests__/**']\n    })\n\n    if (files.length === 0) {\n      throw new Error(`No files found matching patterns: ${patterns.join(', ')}`)\n    }\n\n    const entryMap: Record<string, string> = {}\n    for (const abs of files) {\n      const rel = relative(process.cwd(), abs)\n      const relFromSrc = rel.replace(/^src[\\\\/]/, '')\n      const noExt = relFromSrc.slice(0, relFromSrc.length - extname(relFromSrc).length)\n      const key = noExt.replace(/\\\\/g, '/')\n      entryMap[key] = abs\n    }\n    return entryMap\n  }\n\n  /**\n   * 构建多格式输出配置（TDesign 风格）\n   */\n  private buildMultiFormatOutputs(config: BuilderConfig, multiFormat: MultiFormatBuildConfig): any[] {\n    const outputs: any[] = []\n    const baseOutput = config.output || {}\n\n    // ES 模块构建（支持 tree-shaking）\n    if (multiFormat.es !== false) {\n      outputs.push({\n        ...baseOutput,\n        dir: 'es/',\n        format: 'esm',\n        sourcemap: config.sourcemap !== false,\n        entryFileNames: '[name].mjs',\n        chunkFileNames: '_chunks/dep-[hash].mjs',\n        assetFileNames: '[name].[ext]'\n      })\n    }\n\n    // ESM 构建（保留源码样式引用）\n    if (multiFormat.esm) {\n      outputs.push({\n        ...baseOutput,\n        dir: 'esm/',\n        format: 'esm',\n        sourcemap: config.sourcemap !== false,\n        chunkFileNames: '_chunks/dep-[hash].js'\n      })\n    }\n\n    // Lib 构建（库格式）\n    if (multiFormat.lib) {\n      outputs.push({\n        ...baseOutput,\n        dir: 'lib/',\n        format: 'esm',\n        sourcemap: config.sourcemap !== false,\n        chunkFileNames: '_chunks/dep-[hash].js'\n      })\n    }\n\n    // CJS 构建（CommonJS 格式）\n    if (multiFormat.cjs) {\n      outputs.push({\n        ...baseOutput,\n        dir: 'cjs/',\n        format: 'cjs',\n        sourcemap: config.sourcemap !== false,\n        exports: 'named',\n        chunkFileNames: '_chunks/dep-[hash].js'\n      })\n    }\n\n    // UMD 构建（浏览器格式）\n    if (multiFormat.umd) {\n      const umdName = config.umd?.name || 'LDesign'\n      outputs.push({\n        ...baseOutput,\n        file: `dist/${config.umd?.filename || 'index'}.js`,\n        format: 'umd',\n        name: umdName,\n        exports: 'named',\n        globals: { vue: 'Vue', ...config.globals },\n        sourcemap: config.sourcemap !== false\n      })\n    }\n\n    // UMD 压缩版本\n    if (multiFormat.umdMin) {\n      const umdName = config.umd?.name || 'LDesign'\n      outputs.push({\n        ...baseOutput,\n        file: `dist/${config.umd?.filename || 'index'}.min.js`,\n        format: 'umd',\n        name: umdName,\n        exports: 'named',\n        globals: { vue: 'Vue', ...config.globals },\n        sourcemap: config.sourcemap !== false\n      })\n    }\n\n    return outputs\n  }\n\n  /**\n   * 构建多格式插件配置（TDesign 风格）\n   */\n  private async buildMultiFormatPlugins(config: BuilderConfig, cssStrategy: CSSBuildStrategy): Promise<any[]> {\n    const plugins: any[] = []\n\n    try {\n      // Vue SFC 插件\n      const vuePlugin = await import('rollup-plugin-vue')\n      plugins.push(vuePlugin.default({\n        target: 'browser',\n        css: false, // CSS 由专门的插件处理\n        compileTemplate: true,\n        preprocessStyles: true\n      }))\n\n      // Node 解析插件\n      const nodeResolve = await import('@rollup/plugin-node-resolve')\n      plugins.push(nodeResolve.default({\n        preferBuiltins: false,\n        browser: true,\n        extensions: ['.mjs', '.js', '.json', '.ts', '.tsx', '.vue']\n      }))\n\n      // CommonJS 插件\n      const commonjs = await import('@rollup/plugin-commonjs')\n      plugins.push(commonjs.default())\n\n      // esbuild 插件处理 TypeScript\n      const { default: esbuild } = await import('rollup-plugin-esbuild')\n      plugins.push(esbuild({\n        include: /\\.(ts|tsx|js|jsx)$/,\n        exclude: [/node_modules/],\n        target: 'es2020',\n        jsx: 'preserve',\n        tsconfig: 'tsconfig.json',\n        minify: shouldMinify(config),\n        sourceMap: config.sourcemap !== false\n      }))\n\n      // JSON 插件\n      const json = await import('@rollup/plugin-json')\n      plugins.push(json.default())\n\n      // 根据 CSS 策略添加样式处理插件\n      plugins.push(...await this.buildCSSStrategyPlugins(config, cssStrategy))\n\n      // 添加多入口支持\n      if (config.multiFormat?.es || config.multiFormat?.esm || config.multiFormat?.lib) {\n        try {\n          const multiInput = await import('rollup-plugin-multi-input')\n          plugins.push(multiInput.default({\n            relative: 'src/',\n            transformOutputPath: (output: string) => output\n          }))\n        } catch (e) {\n          console.warn('rollup-plugin-multi-input 不可用，跳过多入口支持')\n        }\n      }\n\n    } catch (error) {\n      console.error('插件加载失败:', error)\n    }\n\n    return plugins\n  }\n\n  /**\n   * 构建 CSS 策略插件（TDesign 风格）\n   */\n  private async buildCSSStrategyPlugins(config: BuilderConfig, cssStrategy: CSSBuildStrategy): Promise<any[]> {\n    const plugins: any[] = []\n\n    switch (cssStrategy) {\n      case 'single':\n        // CSS 打包到一个文件中\n        try {\n          const postcss = await import('rollup-plugin-postcss')\n          plugins.push(postcss.default({\n            extract: `${shouldMinify(config) ? 'index.min' : 'index'}.css`,\n            minimize: shouldMinify(config),\n            sourceMap: config.sourcemap !== false,\n            extensions: ['.sass', '.scss', '.css', '.less']\n          }))\n        } catch (e) {\n          console.warn('rollup-plugin-postcss 不可用，跳过 CSS 单文件打包')\n        }\n        break\n\n      case 'multi':\n        // CSS 分别打包到各自的 style 下\n        try {\n          // 使用 staticImport 处理样式文件的静态导入\n          const staticImport = await import('rollup-plugin-static-import')\n          plugins.push(staticImport.default({\n            baseDir: 'src/',\n            include: ['**/style/css.mjs']\n          }))\n\n          // 使用 ignoreImport 忽略样式导入，但添加替换导入\n          const ignoreImport = await import('rollup-plugin-ignore-import')\n          plugins.push(ignoreImport.default({\n            include: ['**/style/*'],\n            body: 'import \"./style/css.mjs\";'\n          }))\n\n          // 复制样式文件\n          const copy = await import('rollup-plugin-copy')\n          plugins.push(copy.default({\n            targets: [\n              {\n                src: 'src/**/style/css.js',\n                dest: 'es',\n                rename: (name: string, extension: string, fullPath: string) => {\n                  return `${fullPath.replace('src/', '').slice(0, -6)}${name}.mjs`\n                }\n              }\n            ],\n            verbose: true\n          }))\n        } catch (e) {\n          console.warn('CSS multi 策略插件不可用，回退到基础样式处理')\n          // 回退到基础样式处理\n          const styles = await import('rollup-plugin-styles')\n          plugins.push(styles.default({\n            mode: 'extract',\n            minimize: shouldMinify(config)\n          }))\n        }\n        break\n\n      case 'source':\n        // 不打包 less，但保持引用\n        // 这种情况下不添加样式处理插件，保持源码引用\n        break\n\n      case 'ignore':\n        // 完全忽略 less\n        try {\n          const ignoreImport = await import('rollup-plugin-ignore-import')\n          plugins.push(ignoreImport.default({\n            include: ['**/style/index.js', '**/*.less', '**/*.css', '**/*.scss', '**/*.sass']\n          }))\n        } catch (e) {\n          console.warn('rollup-plugin-ignore-import 不可用，跳过样式忽略')\n        }\n        break\n\n      default:\n        // 默认使用基础样式处理\n        try {\n          const styles = await import('rollup-plugin-styles')\n          plugins.push(styles.default({\n            mode: 'extract',\n            minimize: shouldMinify(config),\n            sourceMap: config.sourcemap !== false\n          }))\n        } catch (e) {\n          console.warn('rollup-plugin-styles 不可用，跳过样式处理')\n        }\n    }\n\n    return plugins\n  }\n}\n"]}