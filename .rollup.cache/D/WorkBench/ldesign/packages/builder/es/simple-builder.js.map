{"version":3,"file":"simple-builder.js","sourceRoot":"","sources":["../src/simple-builder.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * 简化版构建器 - 参考 TDesign 的构建思路\n * \n * 专门用于构建 TypeScript 库和 Vue 组件库\n * 支持多种构建格式和样式处理策略\n * \n * @author LDesign Team\n * @version 1.0.0\n */\n\nimport { glob } from 'glob'\nimport { readFile, writeFile, remove } from 'fs-extra'\nimport { rollup, Plugin } from 'rollup'\nimport url from '@rollup/plugin-url'\nimport copy from 'rollup-plugin-copy'\nimport json from '@rollup/plugin-json'\nimport babel from '@rollup/plugin-babel'\nimport vuePlugin from 'rollup-plugin-vue'\nimport styles from 'rollup-plugin-styles'\nimport esbuild from 'rollup-plugin-esbuild'\nimport postcss from 'rollup-plugin-postcss'\nimport replace from '@rollup/plugin-replace'\nimport { terser } from 'rollup-plugin-terser'\nimport commonjs from '@rollup/plugin-commonjs'\nimport nodeResolve from '@rollup/plugin-node-resolve'\nimport ignoreImport from 'rollup-plugin-ignore-import'\nimport multiInput from 'rollup-plugin-multi-input'\nimport staticImport from 'rollup-plugin-static-import'\n\n/**\n * 构建配置接口\n */\nexport interface BuildConfig {\n  /** 项目名称 */\n  name: string\n  /** 版本号 */\n  version: string\n  /** 作者 */\n  author?: string\n  /** 许可证 */\n  license?: string\n  /** 入口文件 */\n  input?: string | string[]\n  /** 输出目录 */\n  outDir?: string\n  /** 外部依赖 */\n  external?: string[]\n  /** 全局变量映射 */\n  globals?: Record<string, string>\n  /** 是否为 Vue 组件库 */\n  isVueLibrary?: boolean\n  /** 组件根目录 */\n  componentsRoot?: string\n}\n\n/**\n * CSS 构建策略\n */\nexport type CSSBuildType = 'single' | 'multi' | 'source' | 'ignore'\n\n/**\n * 默认扩展名\n */\nconst DEFAULT_EXTENSIONS = ['.js', '.jsx', '.es6', '.es', '.mjs', '.cjs']\n\n/**\n * 获取插件配置\n */\nconst getPlugins = ({\n  cssBuildType,\n  env,\n  isProd,\n  config\n}: {\n  cssBuildType?: CSSBuildType\n  env?: string\n  isProd?: boolean\n  config: BuildConfig\n} = {} as any) => {\n  const plugins = [\n    nodeResolve({\n      extensions: ['.mjs', '.js', '.json', '.node', '.ts', '.tsx', '.vue'],\n    }) as unknown as Plugin,\n    commonjs(),\n    esbuild({\n      target: 'esnext',\n      minify: false,\n      jsx: 'preserve',\n    }),\n    json(),\n    url(),\n    replace({\n      preventAssignment: true,\n      values: {\n        PKG_VERSION: JSON.stringify(config.version),\n      },\n    }),\n  ]\n\n  // 如果是 Vue 组件库，添加 Vue 插件\n  if (config.isVueLibrary) {\n    plugins.unshift(vuePlugin())\n\n    // Babel 转换配置\n    plugins.push(babel({\n      babelHelpers: 'runtime',\n      extensions: [...DEFAULT_EXTENSIONS, '.vue', '.ts', '.tsx'],\n      exclude: 'node_modules/**'\n    }))\n  }\n\n  // CSS 处理策略\n  if (cssBuildType === 'single') {\n    // CSS 打包到一个文件中\n    plugins.push(\n      postcss({\n        extract: `${isProd ? `${config.name}.min` : config.name}.css`,\n        minimize: isProd,\n        sourceMap: true,\n        extensions: ['.sass', '.scss', '.css', '.less'],\n      }),\n    )\n  } else if (cssBuildType === 'multi') {\n    // CSS 分别打包到各自的 style 下\n    const componentsRoot = config.componentsRoot || 'src'\n\n    plugins.push(\n      staticImport({\n        baseDir: componentsRoot,\n        include: [`${componentsRoot}/**/style/css.mjs`],\n      }),\n      ignoreImport({\n        include: [`${componentsRoot}/**/style/*`],\n        body: 'import \"./style/css.mjs\";',\n      }),\n      copy({\n        targets: [\n          {\n            src: `${componentsRoot}/**/style/css.js`,\n            dest: `${config.outDir || '.'}/es`,\n            rename: (name, extension, fullPath) =>\n              `${fullPath.replace(componentsRoot + '/', '').slice(0, -6)}${name}.mjs`,\n          },\n        ],\n        verbose: true,\n      }),\n    )\n  } else if (cssBuildType === 'ignore') {\n    // 完全忽略样式\n    plugins.push(\n      ignoreImport({\n        include: [`${config.componentsRoot || 'src'}/**/style/index.js`],\n      }),\n    )\n  }\n  // cssBuildType === 'source' 时不添加样式处理插件，保持引用\n\n  if (env) {\n    plugins.push(\n      replace({\n        preventAssignment: true,\n        values: {\n          'process.env.NODE_ENV': JSON.stringify(env),\n        },\n      }),\n    )\n  }\n\n  if (isProd) {\n    plugins.push(\n      terser({\n        output: {\n          ascii_only: true,\n        },\n      }),\n    )\n  }\n\n  return plugins\n}\n\n/**\n * 生成 banner\n */\nconst createBanner = (config: BuildConfig) => {\n  return `/**\n * ${config.name} v${config.version}\n * (c) ${new Date().getFullYear()} ${config.author || 'LDesign Team'}\n * @license ${config.license || 'MIT'}\n */\n`\n}\n\n/**\n * 构建 ES 模块（支持 tree-shaking）\n */\nexport const buildEs = async (config: BuildConfig) => {\n  console.log('🔨 构建 ES 模块...')\n\n  const componentsRoot = config.componentsRoot || 'src'\n  const inputList = [\n    `${componentsRoot}/**/*.ts`,\n    `${componentsRoot}/**/*.tsx`,\n    `!${componentsRoot}/**/demos`,\n    `!${componentsRoot}/**/*.d.ts`,\n    `!${componentsRoot}/**/type.ts`,\n    `!${componentsRoot}/**/types.ts`,\n    `!${componentsRoot}/**/__tests__`,\n  ]\n\n  // 先构建 CSS\n  if (config.isVueLibrary) {\n    const cssBundle = await rollup({\n      input: [`${componentsRoot}/**/style/index.js`],\n      plugins: [multiInput({ relative: componentsRoot }), styles({ mode: 'extract' }), nodeResolve()],\n    })\n\n    await cssBundle.write({\n      banner: createBanner(config),\n      dir: `${config.outDir || '.'}/es/`,\n      assetFileNames: '[name].css',\n    })\n  }\n\n  // 构建组件\n  const external = [...(config.external || []), 'vue']\n  const bundle = await rollup({\n    input: [...inputList, `!${componentsRoot}/index-lib.ts`],\n    treeshake: false, // 为了保留 style/css.js\n    external,\n    plugins: [multiInput({ relative: componentsRoot }), ...getPlugins({ cssBuildType: 'multi', config })],\n  })\n\n  await bundle.write({\n    banner: createBanner(config),\n    dir: `${config.outDir || '.'}/es/`,\n    format: 'esm',\n    sourcemap: true,\n    entryFileNames: '[name].mjs',\n    chunkFileNames: '_chunks/dep-[hash].mjs',\n  })\n\n  // 清理不需要的文件\n  const files = await glob(`${config.outDir || '.'}/es/**/style/index.js`)\n  await Promise.all(files.map(filePath => remove(filePath)))\n\n  console.log('✅ ES 模块构建完成')\n}\n\n/**\n * 构建 ESM 模块（保留源码样式引用）\n */\nexport const buildEsm = async (config: BuildConfig) => {\n  console.log('🔨 构建 ESM 模块...')\n\n  const componentsRoot = config.componentsRoot || 'src'\n  const inputList = [\n    `${componentsRoot}/**/*.ts`,\n    `${componentsRoot}/**/*.tsx`,\n    `!${componentsRoot}/**/demos`,\n    `!${componentsRoot}/**/*.d.ts`,\n    `!${componentsRoot}/**/type.ts`,\n    `!${componentsRoot}/**/types.ts`,\n    `!${componentsRoot}/**/__tests__`,\n  ]\n\n  const external = [...(config.external || []), 'vue', /@ldesign\\/common-style/]\n  const bundle = await rollup({\n    input: [...inputList, `!${componentsRoot}/index-lib.ts`],\n    external,\n    plugins: [\n      multiInput({ relative: componentsRoot }),\n      // 复制通用样式\n      copy({\n        targets: [\n          {\n            src: 'src/styles/**/*.less',\n            dest: `${config.outDir || '.'}/esm/common`,\n            rename: (_, __, fullPath) => `${fullPath.replace('src/', '')}`,\n          },\n        ],\n        verbose: true,\n      }),\n      ...getPlugins({ cssBuildType: 'source', config }),\n    ],\n  })\n\n  await bundle.write({\n    banner: createBanner(config),\n    dir: `${config.outDir || '.'}/esm/`,\n    format: 'esm',\n    sourcemap: true,\n    chunkFileNames: '_chunks/dep-[hash].js',\n  })\n\n  // 替换样式导入路径\n  const files = await glob(`${config.outDir || '.'}/esm/**/*.*`)\n  const rewritePromises = files.map(async (filePath) => {\n    const content = await readFile(filePath, 'utf8')\n    const newContent = content.replace(/@ldesign\\/common-style/g, `${config.name}/esm/common/style`)\n    if (content !== newContent) {\n      await writeFile(filePath, newContent, 'utf8')\n    }\n  })\n  await Promise.all(rewritePromises)\n\n  console.log('✅ ESM 模块构建完成')\n}\n\n/**\n * 构建 Lib 格式\n */\nexport const buildLib = async (config: BuildConfig) => {\n  console.log('🔨 构建 Lib 格式...')\n\n  const componentsRoot = config.componentsRoot || 'src'\n  const inputList = [\n    `${componentsRoot}/**/*.ts`,\n    `${componentsRoot}/**/*.tsx`,\n    `!${componentsRoot}/**/demos`,\n    `!${componentsRoot}/**/*.d.ts`,\n    `!${componentsRoot}/**/type.ts`,\n    `!${componentsRoot}/**/types.ts`,\n    `!${componentsRoot}/**/__tests__`,\n  ]\n\n  const external = [...(config.external || []), 'vue']\n  const bundle = await rollup({\n    input: inputList,\n    external,\n    plugins: [multiInput({ relative: componentsRoot }), ...getPlugins({ cssBuildType: 'ignore', config })],\n  })\n\n  await bundle.write({\n    banner: createBanner(config),\n    dir: `${config.outDir || '.'}/lib/`,\n    format: 'esm',\n    sourcemap: true,\n    chunkFileNames: '_chunks/dep-[hash].js',\n  })\n\n  console.log('✅ Lib 格式构建完成')\n}\n\n/**\n * 构建 CJS 格式\n */\nexport const buildCjs = async (config: BuildConfig) => {\n  console.log('🔨 构建 CJS 格式...')\n\n  const componentsRoot = config.componentsRoot || 'src'\n  const inputList = [\n    `${componentsRoot}/**/*.ts`,\n    `${componentsRoot}/**/*.tsx`,\n    `!${componentsRoot}/**/demos`,\n    `!${componentsRoot}/**/*.d.ts`,\n    `!${componentsRoot}/**/type.ts`,\n    `!${componentsRoot}/**/types.ts`,\n    `!${componentsRoot}/**/__tests__`,\n  ]\n\n  // CJS 格式排除 lodash-es\n  const cjsExternalException = ['lodash-es']\n  const external = [...(config.external || []), 'vue'].filter((value) =>\n    typeof value === 'string' ? !cjsExternalException.includes(value) : true,\n  )\n\n  const bundle = await rollup({\n    input: inputList,\n    external,\n    plugins: [multiInput({ relative: componentsRoot }), ...getPlugins({ cssBuildType: 'ignore', config })],\n  })\n\n  await bundle.write({\n    banner: createBanner(config),\n    dir: `${config.outDir || '.'}/cjs/`,\n    format: 'cjs',\n    sourcemap: true,\n    exports: 'named',\n    chunkFileNames: '_chunks/dep-[hash].js',\n  })\n\n  console.log('✅ CJS 格式构建完成')\n}\n\n/**\n * 构建 UMD 格式\n */\nexport const buildUmd = async (config: BuildConfig, isMin = false) => {\n  console.log(`🔨 构建 UMD 格式${isMin ? '（压缩版）' : ''}...`)\n\n  const input = config.input || `${config.componentsRoot || 'src'}/index.ts`\n  const external = ['vue']\n  const globals = { vue: 'Vue', ...config.globals }\n\n  const bundle = await rollup({\n    input,\n    external,\n    plugins: getPlugins({\n      cssBuildType: 'single',\n      isProd: isMin,\n      env: isMin ? 'production' : 'development',\n      config\n    }),\n  })\n\n  await bundle.write({\n    name: config.name,\n    banner: createBanner(config),\n    format: 'umd',\n    exports: 'named',\n    globals,\n    sourcemap: true,\n    file: `${config.outDir || '.'}/dist/${config.name}${isMin ? '.min' : ''}.js`,\n  })\n\n  console.log(`✅ UMD 格式${isMin ? '（压缩版）' : ''}构建完成`)\n}\n\n/**\n * 构建重置样式 CSS\n */\nexport const buildResetCss = async (config: BuildConfig) => {\n  console.log('🎨 构建重置样式 CSS...')\n\n  try {\n    const bundle = await rollup({\n      input: 'src/styles/reset.less',\n      plugins: [postcss({ extract: true })],\n    })\n\n    await bundle.write({\n      file: `${config.outDir || '.'}/dist/reset.css`,\n    })\n\n    console.log('✅ 重置样式 CSS 构建完成')\n  } catch (error) {\n    console.warn('⚠️ 重置样式文件不存在，跳过构建')\n  }\n}\n\n/**\n * 构建插件样式 CSS\n */\nexport const buildPluginCss = async (config: BuildConfig) => {\n  console.log('🎨 构建插件样式 CSS...')\n\n  try {\n    const bundle = await rollup({\n      input: 'src/styles/plugin.less',\n      plugins: [postcss({ extract: true })],\n    })\n\n    await bundle.write({\n      file: `${config.outDir || '.'}/dist/plugin.css`,\n    })\n\n    console.log('✅ 插件样式 CSS 构建完成')\n  } catch (error) {\n    console.warn('⚠️ 插件样式文件不存在，跳过构建')\n  }\n}\n\n/**\n * 删除输出目录\n */\nexport const deleteOutput = async (config: BuildConfig) => {\n  console.log('🗑️ 清理输出目录...')\n\n  const dirs = ['es', 'esm', 'lib', 'cjs', 'dist']\n  const outDir = config.outDir || '.'\n\n  const removePromises = dirs.map(async (dir) => {\n    try {\n      await remove(`${outDir}/${dir}`)\n    } catch (error) {\n      // 忽略删除失败的错误\n    }\n  })\n\n  await Promise.all(removePromises)\n  console.log('✅ 输出目录清理完成')\n}\n\n/**\n * 构建所有格式（TDesign 风格）\n */\nexport const buildComponents = async (config: BuildConfig) => {\n  console.log('🚀 开始 TDesign 风格的多格式构建...')\n\n  // 清理输出目录\n  await deleteOutput(config)\n\n  // 按顺序构建各种格式\n  await buildEs(config)\n  await buildEsm(config)\n  await buildLib(config)\n  await buildCjs(config)\n  await buildUmd(config)\n  await buildUmd(config, true)\n\n  // 构建额外的 CSS 文件\n  if (config.isVueLibrary) {\n    await buildResetCss(config)\n    await buildPluginCss(config)\n  }\n\n  console.log('🎉 TDesign 风格的多格式构建完成！')\n}\n"]}